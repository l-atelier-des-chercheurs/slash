import{n}from"../build.js";const u={props:{current_authors:Array},components:{},data(){return{all_authors:[],search_author_name:""}},async created(){this.all_authors=await this.$api.getFolders({path:"authors"})},async mounted(){},beforeDestroy(){},watch:{},computed:{available_groups(){const a=new Set;return this.all_authors_except_current.forEach(t=>{t.group&&Array.isArray(t.group)&&t.group.forEach(r=>{r&&a.add(r)})}),Array.from(a).sort()},all_authors_except_current(){return this.all_authors.filter(a=>this.current_authors.length>0?!this.current_authors.includes(a.$path):!0)},sorted_authors(){return this.all_authors_except_current.slice().sort((a,t)=>{var r,e,s,o;return(r=this.connected_as)!=null&&r.$path&&a.$path===((e=this.connected_as)==null?void 0:e.$path)?-1:(s=this.connected_as)!=null&&s.$path&&t.$path===((o=this.connected_as)==null?void 0:o.$path)?1:a.name.localeCompare(t.name)})},filtered_authors(){return this.sorted_authors.filter(a=>this.search_author_name?this.twoStringsSearch(a.name,this.search_author_name):!0)}},methods:{addAuthorsFromGroup(a){this.all_authors_except_current.filter(r=>r.group&&Array.isArray(r.group)&&r.group.includes(a)).forEach(r=>{this.$emit("addAuthor",r.$path)})}}};var _=function(){var t=this,r=t._self._c;return r("div",{staticClass:"_authorPicker"},[r("div",{staticClass:"_searchField"},[r("SearchInput",{attrs:{search_placeholder:t.$t("search_by_author_name"),name:"search_author"},model:{value:t.search_author_name,callback:function(e){t.search_author_name=e},expression:"search_author_name"}})],1),t.available_groups.length>0?r("div",{staticClass:"u-spacingBottom"},[r("DLabel",{attrs:{str:t.$t("add_by_group")}}),r("TagsList",{attrs:{tags:t.available_groups,tag_type:"accountgroup",mode:"add"},on:{tagClick:function(e){return t.addAuthorsFromGroup(e)}}})],1):t._e(),t.filtered_authors.length===0?r("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("no_authors_to_show"))+" ")]):t._e(),r("transition-group",{staticClass:"_list",attrs:{tag:"div",name:"listComplete",appear:""}},t._l(t.filtered_authors,function({$path:e}){return r("AuthorTag",{key:e,attrs:{path:e,mode:"add"},on:{click:function(s){return t.$emit("addAuthor",e)}}})}),1)],1)},h=[],i=n(u,_,h,!1,null,"f06f727f");const l=i.exports;export{l as default};
