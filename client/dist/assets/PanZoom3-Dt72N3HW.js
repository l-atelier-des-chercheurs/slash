import{n as _n}from"../build.js";var wn="function",yn="object",Sn="string",bn="number",br="undefined",En=typeof document!==br&&document,zn=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],se=1e-7,Ft={cm:function(i){return i*96/2.54},mm:function(i){return i*96/254},in:function(i){return i*96},pt:function(i){return i*96/72},pc:function(i){return i*96/6},"%":function(i,r){return i*r/100},vw:function(i,r){return r===void 0&&(r=window.innerWidth),i/100*r},vh:function(i,r){return r===void 0&&(r=window.innerHeight),i/100*r},vmax:function(i,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),i/100*r},vmin:function(i,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),i/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Cn(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var t=Array(i),e=0,r=0;r<n;r++)for(var o=arguments[r],s=0,a=o.length;s<a;s++,e++)t[e]=o[s];return t}function Pn(i){return typeof i===br}function H(i){return i&&typeof i===yn}function at(i){return Array.isArray(i)}function nt(i){return typeof i===Sn}function xn(i){return typeof i===bn}function Er(i){return typeof i===wn}function Tn(i,r){var n=i===""||i==" ",t=r===""||r==" ";return t&&n||i===r}function zr(i,r,n,t,e){var o=Re(i,r,n);return o?n:On(i,r,n+1,t,e)}function Re(i,r,n){if(!i.ignore)return null;var t=r.slice(Math.max(n-3,0),n+3).join("");return new RegExp(i.ignore).exec(t)}function On(i,r,n,t,e){for(var o=function(u){var c=r[u].trim();if(c===i.close&&!Re(i,r,u))return{value:u};var h=u,f=Nt(e,function(d){var v=d.open;return v===c});if(f&&(h=zr(f,r,u,t,e)),h===-1)return s=u,"break";u=h,s=u},s,a=n;a<t;++a){var l=o(a);if(a=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Me(i,r){var n=nt(r)?{separator:r}:r,t=n.separator,e=t===void 0?",":t,o=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,l=a===void 0?s:a,u=n.openCloseCharacters,c=u===void 0?zn:u,h=c.map(function(b){var P=b.open,x=b.close;return P===x?P:P+"|"+x}).join("|"),f="(\\s*"+e+"\\s*|"+h+"|\\s+)",d=new RegExp(f,"g"),v=i.split(d).filter(function(b){return b&&b!=="undefined"}),m=v.length,g=[],_=[];function p(){return _.length?(g.push(_.join("")),_=[],!0):!1}for(var w=function(b){var P=v[b].trim(),x=b,R=Nt(c,function(T){var X=T.open;return X===P}),M=Nt(c,function(T){var X=T.close;return X===P});if(R){if(x=zr(R,v,b,m,c),x!==-1&&l)return p()&&o||(g.push(v.slice(b,x+1).join("")),b=x,o)?(y=b,"break"):(y=b,"continue")}else if(M&&!Re(M,v,b)){var z=Cn(c);return z.splice(c.indexOf(M),1),{value:Me(i,{separator:e,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:z})}}else if(Tn(P,e)&&!s)return p(),o?(y=b,"break"):(y=b,"continue");x===-1&&(x=m-1),_.push(v.slice(b,x+1).join("")),b=x,y=b},y,E=0;E<m;++E){var C=w(E);if(E=y,typeof C=="object")return C.value;if(C==="break")break}return _.length&&g.push(_.join("")),g}function Dn(i){return Me(i,"")}function xt(i){return Me(i,",")}function Rn(i){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(i);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Cr(i){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(i);if(!r)return{prefix:"",unit:"",value:NaN};var n=r[1],t=r[2],e=r[3];return{prefix:n,unit:e,value:parseFloat(t)}}function Pr(i){return i.replace(/[\s-_]+([^\s-_])/g,function(r,n){return n.toUpperCase()})}function ae(i,r){return i.replace(/([a-z])([A-Z])/g,function(n,t,e){return""+t+r+e.toLowerCase()})}function de(){return Date.now?Date.now():new Date().getTime()}function Kt(i,r,n){n===void 0&&(n=-1);for(var t=i.length,e=0;e<t;++e)if(r(i[e],e,i))return e;return n}function Mn(i,r,n){n===void 0&&(n=-1);for(var t=i.length,e=t-1;e>=0;--e)if(r(i[e],e,i))return e;return n}function Yn(i,r,n){var t=Mn(i,r);return t>-1?i[t]:n}function Nt(i,r,n){var t=Kt(i,r);return t>-1?i[t]:n}function ge(i){return Object.keys(i)}function Xn(i){var r=ge(i);return r.map(function(n){return i[n]})}function $(i,r){var n=Cr(i),t=n.value,e=n.unit;if(H(r)){var o=r[e];if(o){if(Er(o))return o(t);if(Ft[e])return Ft[e](t,o)}}else if(e==="%")return t*r/100;return Ft[e]?Ft[e](t):t}function st(i,r,n){return Math.max(r,Math.min(i,n))}function Vt(i,r){if(!r)return i;var n=1/r;return Math.round(i/r)/n}function kn(i){return i.reduce(function(r,n){return r.concat(n)},[])}function An(i,r){return i.classList?i.classList.contains(r):!!i.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function lt(i,r){i.classList?i.classList.add(r):i.className+=" "+r}function Gn(i,r){if(i.classList)i.classList.remove(r);else{var n=new RegExp("(\\s|^)"+r+"(\\s|$)");i.className=i.className.replace(n," ")}}function D(i,r,n,t){i.addEventListener(r,n,t)}function O(i,r,n,t){i.removeEventListener(r,n,t)}function Xt(i){return(i==null?void 0:i.ownerDocument)||En}function wt(i){var r;return((r=i==null?void 0:i.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function Ln(i){return i&&"postMessage"in i&&"blur"in i&&"self"in i}function Mt(i){return H(i)&&i.nodeName&&i.nodeType&&"ownerDocument"in i}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pe=function(){return pe=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},pe.apply(this,arguments)};function $n(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var t=Array(i),e=0,r=0;r<n;r++)for(var o=arguments[r],s=0,a=o.length;s<a;s++,e++)t[e]=o[s];return t}var Ye=function(){function i(){this._events={}}var r=i.prototype;return r.on=function(n,t){if(H(n))for(var e in n)this.on(e,n[e]);else this._addEvent(n,t,{});return this},r.off=function(n,t){if(!n)this._events={};else if(H(n))for(var e in n)this.off(e);else if(!t)this._events[n]=[];else{var o=this._events[n];if(o){var s=Kt(o,function(a){return a.listener===t});s>-1&&o.splice(s,1)}}return this},r.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(o){e._addEvent(n,o,{once:!0})})},r.emit=function(n,t){var e=this;t===void 0&&(t={});var o=this._events[n];if(!n||!o)return!0;var s=!1;return t.eventType=n,t.stop=function(){s=!0},t.currentTarget=this,$n(o).forEach(function(a){a.listener(t),a.once&&e.off(n,a.listener)}),!s},r.trigger=function(n,t){return t===void 0&&(t={}),this.emit(n,t)},r._addEvent=function(n,t,e){var o=this._events;o[n]=o[n]||[];var s=o[n];s.push(pe({listener:t},e))},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var me=function(i,r){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},me(i,r)};function Wn(i,r){me(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Y=function(){return Y=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Y.apply(this,arguments)};function Bn(i,r){var n=r[0]-i[0],t=r[1]-i[1],e=Math.atan2(t,n);return e>=0?e:e+Math.PI*2}function le(i){return Bn([i[0].clientX,i[0].clientY],[i[1].clientX,i[1].clientY])/Math.PI*180}function In(i){return i.touches&&i.touches.length>=2}function Ht(i){return i?i.touches?Hn(i.touches):[xr(i)]:[]}function Fn(i){return i&&(i.type.indexOf("mouse")>-1||"button"in i)}function rr(i,r,n){var t=n.length,e=Ot(i,t),o=e.clientX,s=e.clientY,a=e.originalClientX,l=e.originalClientY,u=Ot(r,t),c=u.clientX,h=u.clientY,f=Ot(n,t),d=f.clientX,v=f.clientY,m=o-c,g=s-h,_=o-d,p=s-v;return{clientX:a,clientY:l,deltaX:m,deltaY:g,distX:_,distY:p}}function ue(i){return Math.sqrt(Math.pow(i[0].clientX-i[1].clientX,2)+Math.pow(i[0].clientY-i[1].clientY,2))}function Hn(i){for(var r=Math.min(i.length,2),n=[],t=0;t<r;++t)n.push(xr(i[t]));return n}function xr(i){return{clientX:i.clientX,clientY:i.clientY}}function Ot(i,r){r===void 0&&(r=i.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},t=Math.min(i.length,r),e=0;e<t;++e){var o=i[e];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return r?{clientX:n.clientX/r,clientY:n.clientY/r,originalClientX:n.originalClientX/r,originalClientY:n.originalClientY/r}:n}var ce=function(){function i(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return i.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),le(r)},i.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),le(r)-le(this.startClients)},i.prototype.getPosition=function(r,n){r===void 0&&(r=this.prevClients);var t=rr(r||this.prevClients,this.prevClients,this.startClients),e=t.deltaX,o=t.deltaY;return this.movement+=Math.sqrt(e*e+o*o),this.prevClients=r,t},i.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var n=this.prevClients,t=this.startClients,e=Math.min(this.length,n.length),o=[],s=0;s<e;++s)o[s]=rr([r[s]],[n[s]],[t[s]]);return o},i.prototype.getMovement=function(r){var n=this.movement;if(!r)return n;var t=Ot(r,this.length),e=Ot(this.prevClients,this.length),o=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(o*o+s*s)+n},i.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),ue(r)},i.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),ue(r)/ue(this.startClients)},i.prototype.move=function(r,n){this.startClients.forEach(function(t){t.clientX-=r,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=r,t.clientY-=n})},i}(),nr=["textarea","input"],Xe=function(i){Wn(r,i);function r(n,t){t===void 0&&(t={});var e=i.call(this)||this;e.options={},e.flag=!1,e.pinchFlag=!1,e.data={},e.isDrag=!1,e.isPinch=!1,e.clientStores=[],e.targets=[],e.prevTime=0,e.doubleFlag=!1,e._useMouse=!1,e._useTouch=!1,e._useDrag=!1,e._dragFlag=!1,e._isTrusted=!1,e._isMouseEvent=!1,e._isSecondaryButton=!1,e._preventMouseEvent=!1,e._prevInputEvent=null,e._isDragAPI=!1,e._isIdle=!0,e._preventMouseEventId=0,e._window=window,e.onDragStart=function(f,d){if(d===void 0&&(d=!0),!(!e.flag&&f.cancelable===!1)){var v=f.type.indexOf("drag")>=-1;if(!(e.flag&&v)){e._isDragAPI=!0;var m=e.options,g=m.container,_=m.pinchOutside,p=m.preventWheelClick,w=m.preventRightClick,y=m.preventDefault,E=m.checkInput,C=m.dragFocusedInput,b=m.preventClickEventOnDragStart,P=m.preventClickEventOnDrag,x=m.preventClickEventByCondition,R=e._useTouch,M=!e.flag;if(e._isSecondaryButton=f.which===3||f.button===2,p&&(f.which===2||f.button===1)||w&&(f.which===3||f.button===2))return e.stop(),!1;if(M){var z=e._window.document.activeElement,T=f.target;if(T){var X=T.tagName.toLowerCase(),ft=nr.indexOf(X)>-1,ht=T.isContentEditable;if(ft||ht){if(E||!C&&z===T)return!1;if(z&&(z===T||ht&&z.isContentEditable&&z.contains(T)))if(C)T.blur();else return!1}else if((y||f.type==="touchstart")&&z){var yt=z.tagName.toLowerCase();(z.isContentEditable||nr.indexOf(yt)>-1)&&z.blur()}(b||P||x)&&D(e._window,"click",e._onClick,!0)}e.clientStores=[new ce(Ht(f))],e._isIdle=!1,e.flag=!0,e.isDrag=!1,e._isTrusted=d,e._dragFlag=!0,e._prevInputEvent=f,e.data={},e.doubleFlag=de()-e.prevTime<200,e._isMouseEvent=Fn(f),!e._isMouseEvent&&e._preventMouseEvent&&e._allowMouseEvent();var vt=e._preventMouseEvent||e.emit("dragStart",Y(Y({data:e.data,datas:e.data,inputEvent:f,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,isTrusted:d,isDouble:e.doubleFlag},e.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){e._dragFlag=!1}}));vt===!1&&e.stop(),e._isMouseEvent&&e.flag&&y&&f.preventDefault()}if(!e.flag)return!1;var Gt=0;if(M?(e._attchDragEvent(),R&&_&&(Gt=setTimeout(function(){D(g,"touchstart",e.onDragStart,{passive:!1})}))):R&&_&&O(g,"touchstart",e.onDragStart),e.flag&&In(f)){if(clearTimeout(Gt),M&&f.touches.length!==f.changedTouches.length)return;e.pinchFlag||e.onPinchStart(f)}}}},e.onDrag=function(f,d){if(e.flag){var v=e.options.preventDefault;!e._isMouseEvent&&v&&f.preventDefault(),e._prevInputEvent=f;var m=Ht(f),g=e.moveClients(m,f,!1);if(e._dragFlag){if(e.pinchFlag||g.deltaX||g.deltaY){var _=e._preventMouseEvent||e.emit("drag",Y(Y({},g),{isScroll:!!d,inputEvent:f}));if(_===!1){e.stop();return}}e.pinchFlag&&e.onPinch(f,m)}e.getCurrentStore().getPosition(m,!0)}},e.onDragEnd=function(f){if(e.flag){var d=e.options,v=d.pinchOutside,m=d.container,g=d.preventClickEventOnDrag,_=d.preventClickEventOnDragStart,p=d.preventClickEventByCondition,w=e.isDrag;(g||_||p)&&requestAnimationFrame(function(){e._allowClickEvent()}),!p&&!_&&g&&!w&&e._allowClickEvent(),e._useTouch&&v&&O(m,"touchstart",e.onDragStart),e.pinchFlag&&e.onPinchEnd(f);var y=f!=null&&f.touches?Ht(f):[],E=y.length;E===0||!e.options.keepDragging?e.flag=!1:e._addStore(new ce(y));var C=e._getPosition(),b=de(),P=!w&&e.doubleFlag;e._prevInputEvent=null,e.prevTime=w||P?0:b,e.flag||(e._dettachDragEvent(),e._preventMouseEvent||e.emit("dragEnd",Y({data:e.data,datas:e.data,isDouble:P,isDrag:w,isClick:!w,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,inputEvent:f,isTrusted:e._isTrusted},C)),e.clientStores=[],e._isMouseEvent||(e._preventMouseEvent=!0,clearTimeout(e._preventMouseEventId),e._preventMouseEventId=setTimeout(function(){e._preventMouseEvent=!1},200)),e._isIdle=!0)}},e.onBlur=function(){e.onDragEnd()},e._allowClickEvent=function(){O(e._window,"click",e._onClick,!0)},e._onClick=function(f){e._allowClickEvent(),e._allowMouseEvent();var d=e.options.preventClickEventByCondition;d!=null&&d(f)||(f.stopPropagation(),f.preventDefault())},e._onContextMenu=function(f){var d=e.options;d.preventRightClick?e.onDragEnd(f):f.preventDefault()},e._passCallback=function(){};var o=[].concat(n),s=o[0];e._window=Ln(s)?s:wt(s),e.options=Y({checkInput:!1,container:s&&!("document"in s)?wt(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},t);var a=e.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(e._useDrag=u.indexOf("drag")>-1,e._useTouch=u.indexOf("touch")>-1,e._useMouse=u.indexOf("mouse")>-1,e.targets=o,e._useDrag&&o.forEach(function(f){D(f,"dragstart",e.onDragStart)}),e._useMouse&&(o.forEach(function(f){D(f,"mousedown",e.onDragStart),D(f,"mousemove",e._passCallback)}),D(l,"contextmenu",e._onContextMenu)),c&&D(wt(),"blur",e.onBlur),e._useTouch){var h={passive:!1};o.forEach(function(f){D(f,"touchstart",e.onDragStart,h),D(f,"touchmove",e._passCallback,h)})}return e}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(n,t,e,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(n,t),o&&this.onDrag(e,!0))},r.prototype.move=function(n,t){var e=n[0],o=n[1],s=this.getCurrentStore(),a=s.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+e,clientY:c+o,originalClientX:u,originalClientY:c}}),t,!0)},r.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},r.prototype.setEventData=function(n){var t=this.data;for(var e in n)t[e]=n[e];return this},r.prototype.setEventDatas=function(n){return this.setEventData(n)},r.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Y(Y({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var n=this,t=this.targets,e=this.options.container;this.off(),O(this._window,"blur",this.onBlur),this._useDrag&&t.forEach(function(o){O(o,"dragstart",n.onDragStart)}),this._useMouse&&(t.forEach(function(o){O(o,"mousedown",n.onDragStart)}),O(e,"contextmenu",this._onContextMenu)),this._useTouch&&(t.forEach(function(o){O(o,"touchstart",n.onDragStart)}),O(e,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(n){var t=this,e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var o=new ce(Ht(n));this.pinchFlag=!0,this._addStore(o);var s=this.emit("pinchStart",Y(Y({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){t._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(n,t){if(!(!this.flag||!this.pinchFlag||t.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Y(Y({data:this.data,datas:this.data,movement:this.getMovement(t),angle:e.getAngle(t),rotation:e.getRotation(t),touches:e.getPositions(t),scale:e.getScale(t),distance:e.getDistance(t)},e.getPosition(t)),{inputEvent:n,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(n){if(this.pinchFlag){var t=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.emit("pinchEnd",Y(Y({data:this.data,datas:this.data,isPinch:t,touches:e.getPositions()},e.getPosition()),{inputEvent:n}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(n,t,e){var o=this._getPosition(n,e),s=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!s&&this.isDrag&&(a=!0),Y(Y({data:this.data,datas:this.data},o),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:t,isTrusted:this._isTrusted,isFirstDrag:a})},r.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},r.prototype._getPosition=function(n,t){var e=this.getCurrentStore(),o=e.getPosition(n,t),s=this.clientStores.slice(1).reduce(function(u,c){var h=c.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},o),a=s.distX,l=s.distY;return Y(Y({},o),{distX:a,distY:l})},r.prototype._attchDragEvent=function(){var n=this._window,t=this.options.container,e={passive:!1};this._isDragAPI&&(D(t,"dragover",this.onDrag,e),D(n,"dragend",this.onDragEnd)),this._useMouse&&(D(t,"mousemove",this.onDrag),D(n,"mouseup",this.onDragEnd)),this._useTouch&&(D(t,"touchmove",this.onDrag,e),D(n,"touchend",this.onDragEnd,e),D(n,"touchcancel",this.onDragEnd,e))},r.prototype._dettachDragEvent=function(){var n=this._window,t=this.options.container;this._isDragAPI&&(O(t,"dragover",this.onDrag),O(n,"dragend",this.onDragEnd)),this._useMouse&&(O(t,"mousemove",this.onDrag),O(n,"mouseup",this.onDragEnd)),this._useTouch&&(O(t,"touchstart",this.onDragStart),O(t,"touchmove",this.onDrag),O(n,"touchend",this.onDragEnd),O(n,"touchcancel",this.onDragEnd))},r.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},r}(Ye);function jn(i){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.map(function(t){return t.split(" ").map(function(e){return e?""+i+e:""}).join(" ")}).join(" ")}function Tr(i,r){return r.replace(/([^}{]*){/gm,function(n,t){return t.replace(/\.([^{,\s\d.]+)/g,"."+i+"$1")+"{"})}function rt(i,r){return function(n){n&&(i[r]=n)}}function Zn(i,r,n){return function(t){t&&(i[r][n]=t)}}function _e(i,r){return function(n){var t=n.prototype;i.forEach(function(e){r(t,e)})}}function Vn(i){for(var r=5381,n=i.length;n;)r=r*33^i.charCodeAt(--n);return r>>>0}var Nn=Vn;function Un(i){return Nn(i).toString(36)}function qn(i){if(i&&i.getRootNode){var r=i.getRootNode();if(r.nodeType===11)return r}}function Kn(i,r,n){return n.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(t,e){var o=e.trim();return(o?xt(o):[""]).map(function(s){var a=s.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(i))):a?".".concat(i," ").concat(a):".".concat(i)}).join(", ")+" {"})}function Jn(i,r,n,t,e){var o=Xt(t),s=o.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",i),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Kn(i,r,n),(e||o.head||o.body).appendChild(s),s}function Or(i){var r="rCS"+Un(i);return{className:r,inject:function(n,t){t===void 0&&(t={});var e=qn(n),o=(e||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!o)o=Jn(r,i,t,n,e);else{var s=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var a,l=parseFloat(o.getAttribute("data-styled-count"))||0;l<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(l-1))}}}}}function ke(i,r){for(var n=i.length,t=0;t<n;++t)if(r(i[t],t))return!0;return!1}function Dr(i,r){for(var n=i.length,t=0;t<n;++t)if(r(i[t],t))return i[t];return null}function Rr(i){var r=i;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function Ae(i,r){try{return new RegExp(i,"g").exec(r)}catch{return null}}function Qn(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var i=navigator.userAgentData,r=i.brands||i.uaList;return!!(r&&r.length)}function ti(i,r){var n=Ae("("+i+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return n?n[3]:""}function we(i){return i.replace(/_/g,".")}function Tt(i,r){var n=null,t="-1";return ke(i,function(e){var o=Ae("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!o||e.brand?!1:(n=e,t=o[3]||"-1",e.versionAlias?t=e.versionAlias:e.versionTest&&(t=ti(e.versionTest.toLowerCase(),r)||t),t=we(t),!0)}),{preset:n,version:t}}function jt(i,r){var n={brand:"",version:"-1"};return ke(i,function(t){var e=Mr(r,t);return e?(n.brand=t.id,n.version=t.versionAlias||e.version,n.version!=="-1"):!1}),n}function Mr(i,r){return Dr(i,function(n){var t=n.brand;return Ae(""+r.test,t.toLowerCase())})}var Yr=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Xr=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ye=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],kr=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Ar=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Gr(i){return!!Tt(kr,i).preset}function ei(i){var r=Rr(i),n=!!/mobi/g.exec(r),t={name:"unknown",version:"-1",majorVersion:-1,webview:Gr(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},e={name:"unknown",version:"-1",majorVersion:-1},o=Tt(Yr,r),s=o.preset,a=o.version,l=Tt(Ar,r),u=l.preset,c=l.version,h=Tt(Xr,r);if(t.chromium=!!h.preset,t.chromiumVersion=h.version,!t.chromium){var f=Tt(ye,r);t.webkit=!!f.preset,t.webkitVersion=f.version}return u&&(e.name=u.id,e.version=c,e.majorVersion=parseInt(c,10)),s&&(t.name=s.id,t.version=a,t.webview&&e.name==="ios"&&t.name!=="safari"&&(t.webview=!1)),t.majorVersion=parseInt(t.version,10),{browser:t,os:e,isMobile:n,isHints:!1}}function ri(i){var r=navigator.userAgentData,n=(r.uaList||r.brands).slice(),t=r.mobile||!1,e=n[0],o=(r.platform||navigator.platform).toLowerCase(),s={name:e.brand,version:e.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!jt(kr,n).brand||Gr(Rr())},a={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&ke(ye,function(f){return Mr(n,f)});var l=jt(Xr,n);if(s.chromium=!!l.brand,s.chromiumVersion=l.version||"-1",!s.chromium){var u=jt(ye,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var c=Dr(Ar,function(f){return new RegExp(""+f.test,"g").exec(o)});a.name=c?c.id:"";{var h=jt(Yr,n);s.name=h.brand||s.name,s.version=h.brand&&i?i.uaFullVersion:h.version}return s.webkit&&(a.name=t?"ios":"mac"),a.name==="ios"&&s.webview&&(s.version="-1"),a.version=we(a.version),s.version=we(s.version),a.majorVersion=parseInt(a.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:a,isMobile:t,isHints:!0}}function ni(i){return Qn()?ri():ei(i)}var Se=function(i,r){return Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},Se(i,r)};function Ge(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Se(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var I=function(){return I=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},I.apply(this,arguments)};function ii(i,r,n,t){var e=arguments.length,o=e<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,n):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,r,n,t);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(e<3?s(o):e>3?s(r,n,o):s(r,n))||o);return e>3&&o&&Object.defineProperty(r,n,o),o}function ir(i,r,n){if(n||arguments.length===2)for(var t=0,e=r.length,o;t<e;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return i.concat(o||Array.prototype.slice.call(r))}var oi=ni(),si=oi.browser.name==="safari",ut="infinite-viewer-",or="".concat(ut,"wrapper"),sr="".concat(ut,"scroll-area"),ai="".concat(ut,"scroll-bar"),Lr="".concat(ut,"horizontal-scroll-bar"),$r="".concat(ut,"vertical-scroll-bar"),ar="".concat(ut,"scroll-thumb"),Wr=Or(Tr(ut,`
{
    position: relative;
    overscroll-behavior: none;
}
.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: auto;
    scrollbar-width: none;
    top: 0;
    left: 0;
    will-change: scroll-position;
}
.restrict-wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}
.wrapper::-webkit-scrollbar {
    display: none;
}
.scroll-area {
    position:absolute;
    top:0;
    left:0;
    transform-origin: 0 0;
}
.scroll-bar {
    position:absolute;
    width: 10px;
    height: 10px;
    box-sizing: border-box;
    right: 0;
    bottom: 0;
    overflow: hidden;
}
.horizontal-scroll-bar {
    width: calc(100% - 20px);
    right: 10px;
    height: 14px;
}
.vertical-scroll-bar {
    height: calc(100% - 20px);
    bottom: 10px;
    width: 14px;
}
.scroll-thumb {
    position:relative;
    opacity: 0.7;
    background: #333;
    border-radius: 3px;
    left: 0px;
    top: 0px;
    z-index: 10;
    width: 6px;
    height: 6px;
    transition: all ease 0.2s;
    opacity: 0;
}
.scroll-bar:hover .scroll-thumb {
    border-radius: 5px;
    opacity: 1;
}
.horizontal-scroll-bar .scroll-thumb {
    margin: 4px 0px;
    transition-property: opacity, margin, height, border-radius;
}
.vertical-scroll-bar .scroll-thumb {
    margin: 0px 4px;
    transition-property: opacity, margin, width, border-radius;
}
.horizontal-scroll-bar:hover .scroll-thumb {
    height: 10px;
    margin: 2px 0px;
}
.vertical-scroll-bar:hover .scroll-thumb {
    width: 10px;
    margin: 0px 2px;
}
`)),A={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:si,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0,useBounceScrollBar:!1,useOverflowScroll:!1},lr=function(i){return 1-Math.pow(1-i,3)},ur={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},li=Wr.className,Br=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","zoomRangeX","zoomRangeY","pinchDirection","useOverflowScroll"];ir(ir([],Br,!0),["preventWheelClick","useWheelPinch","useWheelScroll","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer","useBounceScrollBar"],!1);var ui=1e-6;function ci(i){var r=i.deltaX,n=i.deltaY,t=i.datas,e=Date.now(),o=t.speed;if(!o){t.speed=[0,0],t.time=e;return}var s=e-t.time;t.speed=[o[0]/2+r/s,o[1]/2+n/s]}function Ir(i,r){var n=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return Math.abs(n/r)}function fi(i,r){var n=Ir(i,r);return[-i[0]/2*n,-i[1]/2*n]}function N(i){return Math.abs(i)}function hi(i,r,n,t,e){var o=e||isFinite(n[0])?n[0]:Math.min(-1,Math.floor(i/r))*r-t,s=e||isFinite(n[1])?n[1]:Math.max(1,Math.ceil(i/r))*r+t;return[o,s]}function cr(i,r){return i??r}function fr(i,r,n){var t=n.duration,e=n.easing||function(l){return 1-Math.pow(1-l,3)},o=Date.now(),s=o,a=function(){var l=Date.now(),u=l-o;t<u&&(u=t);var c=e(u/t),h=e((s-o)/t);s=l,i(c-h),!(u>=t)&&r(a)};r(a)}var hr=function(i){Ge(r,i);function r(t,e,o){var s=i.call(this)||this;s.type=e,s.isAppend=!1,s.size=0,s.scrollSize=0,s.isHorizontal=!1,s._onDragStart=function(h){var f=s.isHorizontal,d=h.inputEvent.target,v=h.datas,m=s.thumbElement===d;m||setTimeout(function(){requestAnimationFrame(function(){var g=s.thumbElement.getBoundingClientRect(),_=g[f?"left":"top"],p=g[f?"width":"height"],w=_+p,y=h[f?"clientX":"clientY"];if(!(_<=y&&y<=w)){var E=s.size,C=E*E/s.scrollSize;s.scrollBy(_<y?C:-C)}})},100),v.isThumb=m,h.inputEvent.stopPropagation(),h.inputEvent.preventDefault()},s._onDrag=function(h){h.datas.isThumb&&s.scrollBy(s.isHorizontal?h.deltaX:h.deltaY)},s._onWheel=function(h){var f=s.isHorizontal?h.deltaX:h.deltaY;f&&h.preventDefault(),s.trigger("scroll",{delta:f})};var a=e==="horizontal",l=Xt(t),u,c=o;return o?u=o.querySelector(".".concat(ar)):(c=l.createElement("div"),u=l.createElement("div"),c.insertBefore(u,null),s.isAppend=!0),lt(c,a?Lr:$r),lt(c,ai),lt(u,ar),s.thumbElement=u,s.barElement=c,s.isHorizontal=a,s.gesto=new Xe(c,{container:wt(l)}).on("dragStart",function(h){return s._onDragStart(h)}).on("drag",function(h){return s._onDrag(h)}),D(s.barElement,"wheel",s._onWheel,{passive:!1}),s}var n=r.prototype;return n.scrollBy=function(t,e){var o=t/this.size;this.trigger("scroll",{delta:e?t:this.scrollSize*o})},n.render=function(t,e,o,s){this.size=o,this.scrollSize=s;var a=t&&Vt(s-o,.001)>0?1:0,l=this.isHorizontal?["X","width"]:["Y","height"],u=l[0],c=l[1],h=o/s*100,f=Math.max(0,e)/s*100;this.thumbElement.style.cssText+="".concat(c,": ").concat(h,"%;opacity: ").concat(a,";")+"transform: translate".concat(u,"(").concat(100/h*f,"%)")},n.destroy=function(){O(this.barElement,"wheel",this._onWheel),this.gesto.off(),this.off()},r}(Ye),vi=function(i){Ge(r,i);function r(t,e,o){e===void 0&&(e={}),o===void 0&&(o={});var s=i.call(this)||this;return s._containerElement=t,s.offsetX=0,s.offsetY=0,s.containerWidth=0,s.containerHeight=0,s.viewportWidth=0,s.viewportHeight=0,s.viewportScrollWidth=0,s.viewportScrollHeight=0,s.scrollLeft=0,s.scrollTop=0,s._scrollTimer=0,s._zoomTimer=0,s._viewportElement=null,s._wheelContainerElement=null,s.dragFlag=!1,s.isLoop=!1,s._tempScale=[1,1],s._tempRect=null,s._tempRectTimer=null,s._onDestroys=[],s._asLeft=0,s._asTop=0,s.resize=function(){var a=s._containerElement,l=a.offsetWidth,u=a.offsetHeight,c=s._viewportElement,h=c.offsetWidth,f=c.offsetHeight,d=c.scrollWidth,v=c.scrollHeight;s.containerWidth=l,s.containerHeight=u,s.viewportWidth=h,s.viewportHeight=f,s.viewportScrollWidth=Math.max(h,d),s.viewportScrollHeight=Math.max(f,v),s.render(),s._scrollBy(0,0)},s._onScroll=function(){var a=s.wrapperElement,l=a.scrollLeft,u=a.scrollTop,c=s.zoom,h=c===void 0?A.zoom:c,f=l-s.scrollLeft,d=u-s.scrollTop,v=s.getScrollLeft(),m=s.getScrollTop();s.isLoop&&(s.isLoop=!1),s.scrollLeft=l,s.scrollTop=u,s.scrollTo(v+f/h,m+d/h)},s.onWheel=function(a){var l=s.options,u=l.pinchDirection,c=l.maxPinchWheel||1/0,h=a["".concat(s.wheelPinchKey,"Key")]||a.ctrlKey;if(l.useWheelPinch&&h){var f=a.deltaY,d=f>=0?1:-1,v=Math.min(c,Math.abs(f));f=d*v;var m=-f,g=Math.max(1+m*(l.wheelScale||.01),ui);clearTimeout(s._tempRectTimer),s._tempRectTimer=window.setTimeout(function(){s._tempRect=null},100),s._triggerPinch({distance:v,scale:g,rotation:0,zoom:s.zoom*g,zoomX:s.zoomX*(u==="vertical"?1:g),zoomY:s.zoomY*(u==="horizontal"?1:g),inputEvent:a,isWheel:!0,clientX:a.clientX,clientY:a.clientY,ratioX:0,ratioY:0})}else if(l.useWheelScroll){var _=a.deltaX,f=a.deltaY;a.shiftKey&&!_&&(_=f,f=0),s.scrollBy(_/s.zoomX,f/s.zoomY)}else return;a.preventDefault()},s.onGestureStart=function(a){s._tempScale=[s.zoomX,s.zoomY],s._setClientRect(),a.preventDefault()},s.onGestureChange=function(a){if(a.preventDefault(),s.gesto.isFlag()||!s._tempScale){s._tempScale=[1,1];return}var l=a.scale,u=s._tempScale[0],c=s._tempScale[1],h=s.options.pinchDirection;s._triggerPinch({distance:0,scale:l,rotation:a.rotation,inputEvent:a,isWheel:!0,zoom:(u+c)*l/2,zoomX:u*(h==="vertical"?1:l),zoomY:c*(h==="horizontal"?1:l),clientX:a.clientX,clientY:a.clientY,ratioX:0,ratioY:0})},s.onGestureEnd=function(){},Mt(e)?(s._viewportElement=e,s.options=I(I({},A),o)):(s._viewportElement=t.children[0],s.options=I(I({},A),e)),s.init(),s}var n=r.prototype;return n.getContainer=function(){return this._containerElement},n.getWheelContainer=function(){return this._wheelContainerElement},n.getViewport=function(){return this._viewportElement},n.getWrapper=function(){return this.wrapperElement},n.geScrollArea=function(){return this.scrollAreaElement},n.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var t=this._containerElement;this._onDestroys.forEach(function(e){e()}),O(this.wrapperElement,"scroll",this._onScroll),O(this._wheelContainerElement,"wheel",this.onWheel),O(t,"gesturestart",this.onGestureStart),O(t,"gesturechange",this.onGestureChange),O(t,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},n.getScrollTop=function(t){t===void 0&&(t={});var e=!1,o=!1;H(t)?(e=t.range,o=t.absolute):e=t;var s=this.zoomY,a=this.scrollTop/s+this.offsetY+(e?N(this.getRangeY()[0]):0);return o?a*s:a},n.getScrollLeft=function(t){t===void 0&&(t={});var e=!1,o=!1;H(t)?(e=t.range,o=t.absolute):e=t;var s=this.zoomX,a=this.scrollLeft/s+this.offsetX+(e?N(this.getRangeX()[0]):0);return o?a*s:a},n.getScrollWidth=function(t){var e=this._getScrollRangeX(),o=this.zoomX,s=this.containerWidth/o+N(e[0])+e[1];return t?s:s*o},n.getScrollHeight=function(t){var e=this._getScrollRangeY(),o=this.zoomY,s=this.containerHeight/o+N(e[0])+e[1];return t?s:s*o},n.scrollCenter=function(t){t===void 0&&(t={}),this.resize();var e=this.zoomX,o=this.zoomY,s=-(this.containerWidth/e-this.viewportWidth)/2,a=-(this.containerHeight/o-this.viewportHeight)/2;return t.absolute&&(s*=e,a*=o),t.horizontal===!1&&(s=this.getScrollLeft()),t.vertical===!1&&(a=this.getScrollTop()),this.scrollTo(s,a,t)},n.setTo=function(t){var e=t.x,o=e===void 0?this.getScrollLeft():e,s=t.y,a=s===void 0?this.getScrollTop():s,l=t.zoom,u=l===void 0?[this.getZoomX(),this.getZoomY()]:l,c=t.duration,h=this,f=h.zoomX,d=h.zoomY,v=h.zoomRange,m=this,g=m.zoomOffsetX,_=g===void 0?A.zoomOffsetX:g,p=m.zoomOffsetY,w=p===void 0?A.zoomOffsetY:p;"zoomOffsetX"in t&&(_=t.zoomOffsetX),"zoomOffsetY"in t&&(w=t.zoomOffsetY);var y=at(u)?u:[u,u],E=y[0],C=y[1],b=this.zoomRangeX||v,P=this.zoomRangeY||v,x=st(E,b[0],b[1]),R=st(C,P[0],P[1]),M=$("".concat(_),this.viewportWidth)*(1/f-1/x),z=$("".concat(w),this.viewportHeight)*(1/d-1/R);this.scrollTo(o-M,a-z,{duration:c}),this.setZoom(u,{zoomOffsetX:_,zoomOffsetY:w,duration:c,zoomBase:"fixed"})},n.setBy=function(t){var e=t.x,o=e===void 0?0:e,s=t.y,a=s===void 0?0:s,l=t.zoom,u=l===void 0?[0,0]:l,c=at(u)?u:[u,u],h=c[0],f=c[1];this.setTo(I(I({},t),{x:this.getScrollLeft()+o,y:this.getScrollTop()+a,zoom:[this.zoomX+h,this.zoomY+f]}))},n.scrollBy=function(t,e,o){if(this._pauseScrollAnimation(),!o||!o.duration){var s=this.getScrollLeft(),a=this.getScrollTop();return o!=null&&o.absolute&&(s*=this.zoomX,a*=this.zoomY),this._scrollTo(s+t,a+e,o)}else return this._startScrollAnimation([t,e],o),!0},n.scrollTo=function(t,e,o){if(this._pauseScrollAnimation(),!o||!o.duration)return this._scrollTo(t,e,o);var s=this.getScrollLeft(),a=this.getScrollTop();return o!=null&&o.absolute&&(s*=this.zoomX,a*=this.zoomY),this.scrollBy(t-s,e-a,o)},n.zoomBy=function(t,e){this._pauseZoomAnimation();var o=at(t)?t:[t,t],s=o[0],a=o[1];!e||!e.duration?this._setZoom([this.zoomX+s,this.zoomY+a],e):this._startZoomAnimation([s,a],e)},n.setZoom=function(t,e){if(this._pauseZoomAnimation(),!e||!e.duration)this._setZoom(t,e);else{var o=at(t)?t:[t,t],s=o[0],a=o[1];this._startZoomAnimation([s-this.zoomX,a-this.zoomY],e)}},n.getViewportWidth=function(){return this.viewportWidth},n.getViewportHeight=function(){return this.viewportWidth},n.getViewportScrollWidth=function(){return this.viewportScrollWidth},n.getViewportScrollHeight=function(){return this.viewportScrollHeight},n.getContainerWidth=function(){return this.containerWidth},n.getContainerHeight=function(){return this.containerHeight},n.getZoom=function(){return(this.zoomX+this.zoomY)/2},n.getZoomX=function(){return this.zoomX},n.getZoomY=function(){return this.zoomY},n.getRangeX=function(t,e){return this._getRangeCoord("horizontal",t,e)},n.getRangeY=function(t,e){return this._getRangeCoord("vertical",t,e)},n.init=function(){var t=this,e,o=this._containerElement,s=this.options,a=Xt(o),l=wt(o),u=s.wrapperElement||o.querySelector(".".concat(or)),c=s.scrollAreaElement||o.querySelector(".".concat(sr)),h=s.horizontalScrollElement||o.querySelector(".".concat(Lr)),f=s.verticalScrollElement||o.querySelector(".".concat($r));u||(u=a.createElement("div"),u.insertBefore(this._viewportElement,null),o.insertBefore(u,null)),this.wrapperElement=u,c||(c=a.createElement("div"),u.insertBefore(c,u.firstChild)),this.scrollAreaElement=c,lt(o,li),lt(u,or),lt(c,sr);var d=new hr(o,"horizontal",h),v=new hr(o,"vertical",f);this.horizontalScrollbar=d,this.verticalScrollbar=v,d.on("scroll",function(p){t.scrollBy(p.delta/t.zoomX,0)}),v.on("scroll",function(p){t.scrollBy(0,p.delta/t.zoomY)}),d.isAppend&&o.insertBefore(d.barElement,null),v.isAppend&&o.insertBefore(v.barElement,null),this.injectResult=Wr.inject(o,{nonce:this.options.cspNonce});var m=s.wheelContainer,g=null;if(m&&(nt(m)?g=a.querySelector(m):Mt(m)?g=m:("value"in m||"current"in m)&&(g=m.current||m.value)),g||(g=o),this._wheelContainerElement=g,this.gesto=new Xe(o,{container:wt(o),events:["touch","mouse"],preventWheelClick:(e=this.options.preventWheelClick)!==null&&e!==void 0?e:!0}).on("dragStart",function(p){var w=p.inputEvent,y=p.stop,E=p.datas;if(!t.useMouseDrag&&p.isMouseEvent){y();return}t._pauseScrollAnimation(),t.dragFlag=!1;var C=t.trigger("dragStart",p);if(C===!1){y();return}w.preventDefault(),E.startEvent=w}).on("drag",function(p){!t.options.usePinch||p.isPinch||t.useMouseDrag&&p.isMouseEvent?(t.trigger("drag",I(I({},p),{inputEvent:p.inputEvent})),ci(p),t.scrollBy(-p.deltaX/t.zoomX,-p.deltaY/t.zoomY)):!t.dragFlag&&p.movement>s.pinchThreshold&&(t.dragFlag=!0,t.trigger("abortPinch",{inputEvent:p.datas.startEvent||p.inputEvent}))}).on("dragEnd",function(p){t.trigger("dragEnd",{isDrag:p.isDrag,isDouble:p.isDouble,inputEvent:p.inputEvent}),t._startScrollAnimationBySpeed(p.datas.speed)}).on("pinchStart",function(p){var w=p.inputEvent,y=p.datas,E=p.stop;w.preventDefault(),t._pauseScrollAnimation(),y.startZoom=[t.zoomX,t.zoomY];var C=t.trigger("pinchStart",{inputEvent:w});C===!1&&E(),t._setClientRect()}).on("pinch",function(p){var w=p.scale,y=t.options.pinchDirection;t._triggerPinch({rotation:p.rotation,distance:p.distance,scale:p.scale,inputEvent:p.inputEvent,isWheel:!1,zoom:p.datas.startZoom*w,zoomX:t.zoomX*(y==="vertical"?1:w),zoomY:t.zoomY*(y==="horizontal"?1:w),clientX:p.clientX,clientY:p.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){t._tempRect=null}),D(u,"scroll",this._onScroll),s.useResizeObserver){var _=new l.ResizeObserver(function(){t.resize()});_.observe(this._viewportElement),_.observe(this._containerElement),this._onDestroys.push(function(){_.disconnect()})}else D(l,"resize",this.resize),this._onDestroys.push(function(){O(l,"resize",t.resize)});(s.useWheelPinch||s.useWheelScroll)&&D(g,"wheel",this.onWheel,{passive:!1}),s.useGesture&&(D(o,"gesturestart",this.onGestureStart,{passive:!1}),D(o,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},n.render=function(){var t=this,e=t.offsetX,o=t.offsetY,s=t.zoomX,a=s===void 0?A.zoomX:s,l=t.zoomY,u=l===void 0?A.zoomY:l,c=t.translateZ,h=c===void 0?0:c;t.rangeX,t.rangeY,t.containerWidth,t.containerHeight;var f=this.options.useTransform,d=f===void 0?A.useTransform:f,v=-e*a,m=-o*u;this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);");var g=this._viewportElement.style;d===!1?g.cssText+="position: relative; left: ".concat(v,"px; top: ").concat(m,"px; "):g.cssText+="transform-origin: 0 0;"+"transform:translate3d(".concat(v,"px, ").concat(m,"px, ").concat(h,"px) scale(").concat(a,", ").concat(u,");"),this.renderScroll()},n.renderScroll=function(){var t=this,e=t.zoomX,o=t.zoomY,s=t.containerWidth,a=t.containerHeight,l=this.horizontalScrollbar,u=this.verticalScrollbar;if(this.options.useBounceScrollBar){var c=this.getScrollLeft(!0)*e,h=this.getRangeX(!0),f=s+N(h[0])+N(h[1]),d=this.getScrollTop(!0)*o,v=this.getRangeY(!0),m=a+N(v[0])+N(v[1]);l.render(this.displayHorizontalScroll,c,s,f),u.render(this.displayVerticalScroll,d,a,m)}else{var g=this._getScrollRangeX(),_=this._getScrollRangeY(),c=this.getScrollLeft(),d=this.getScrollTop(),f=this.containerWidth+N(g[0])+g[1],m=this.containerHeight+N(_[0])+_[1];l.render(this.displayHorizontalScroll,c-g[0],s,f),u.render(this.displayVerticalScroll,d-_[0],a,m)}},n.move=function(t,e){var o=this.wrapperElement;o.scrollLeft=t,o.scrollTop=e},n.setDisplayVerticalScroll=function(t){this.options.displayVerticalScroll=t,this.renderScroll()},n.setDisplayHorizontalScroll=function(t){this.options.displayHorizontalScroll=t,this.renderScroll()},n._startZoomAnimation=function(t,e){var o=this;if(t){var s=e.duration,a=e.easing||lr;fr(function(l){return o._setZoom([o.zoomX+t[0]*l,o.zoomY+t[1]*l],e)},function(l){o._zoomTimer=requestAnimationFrame(l)},{easing:a,duration:s})}},n._startScrollAnimation=function(t,e){var o=this;if(!(!t[0]&&!t[1])){var s=e.duration,a=e.easing||lr;fr(function(l){return o._scrollBy(t[0]*l,t[1]*l,e)},function(l){o._scrollTimer=requestAnimationFrame(l)},{easing:a,duration:s})}},n._startScrollAnimationBySpeed=function(t){if(!(!t||!t[0]&&!t[1])){var e=-6e-4,o=Ir(t,e),s=fi(t,e);return this._startScrollAnimation(s,{duration:o})}},n._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},n._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},n.getScrollAreaWidth=function(){var t=this.getRangeX(!0),e=t[0],o=t[1];return e||o?this.margin*2:0},n.getScrollAreaHeight=function(){var t=this.getRangeY(!0),e=t[0],o=t[1];return e||o?this.margin*2:0},n._triggerPinch=function(t){var e=t.clientX,o=t.clientY,s=t.zoomX,a=t.zoomY;this.useAutoZoom&&this._zoomByClient([s,a],e,o),this._tempRect||this._setClientRect();var l=this.zoomRange,u=this.zoomRangeX||l,c=this.zoomRangeY||l,h=this._tempRect,f=h.left,d=h.top,v=h.width,m=h.height,g=(e-f)/v*100,_=(o-d)/m*100;this.trigger("pinch",I(I({},t),{zoom:st((s+a)/2,l[0],l[1]),zoomX:st(s,u[0],u[1]),zoomY:st(a,c[0],c[1]),ratioX:g,ratioY:_}))},n._setClientRect=function(){var t=this.getContainer().getBoundingClientRect();this._tempRect={left:t.left,top:t.top,width:t.width,height:t.height}},n._zoomByClient=function(t,e,o){this._tempRect||this._setClientRect();var s=this._tempRect,a=s.left,l=s.top,u=s.width,c=s.height,h=this.options,f=h.zoomOffsetX,d=h.zoomOffsetY;h.zoomOffsetX="".concat((e-a)/u*100,"%"),h.zoomOffsetY="".concat((o-l)/c*100,"%"),this._setZoom(t,{zoomBase:"screen"}),h.zoomOffsetX=f,h.zoomOffsetY=d},n._setZoom=function(t,e){e===void 0&&(e={});var o=e.zoomBase,s=this,a=s.containerWidth,l=s.containerHeight,u=s.zoomX,c=s.zoomY,h=s.zoomRange,f=this,d=f.zoomOffsetX,v=d===void 0?A.zoomOffsetX:d,m=f.zoomOffsetY,g=m===void 0?A.zoomOffsetY:m;"zoomOffsetX"in e&&(v=e.zoomOffsetX),"zoomOffsetY"in e&&(g=e.zoomOffsetY);var _=this.getScrollLeft(),p=this.getScrollTop(),w=at(t)?t:[t,t],y=w[0],E=w[1],C=this.zoomRangeX||h,b=this.zoomRangeY||h,P=st(y,C[0],C[1]),x=st(E,b[0],b[1]),R=this.options;R.zoomX=P,R.zoomY=x,R.zoom=(P+x)/2;var M=this.getScrollLeft(),z=this.getScrollTop(),T=0,X=0;o==="fixed"?(T=$("".concat(v),this.viewportWidth),X=$("".concat(g),this.viewportHeight)):o==="viewport"?(T=(-_+$("".concat(v),this.viewportWidth))*u,X=(-p+$("".concat(g),this.viewportHeight))*c):(T=$("".concat(v),a),X=$("".concat(g),l));var ft=_+T/u,ht=p+X/c,yt=M+T/P,vt=z+X/x;this._scrollBy(ft-yt,ht-vt,{zoom:!!(P-u||x-c)}),this.render()},n._scrollBy=function(t,e,o){var s=this.getScrollLeft(),a=this.getScrollTop();return o!=null&&o.absolute&&(s*=this.zoomX,a*=this.zoomY),this._scrollTo(s+t,a+e,o)},n._scrollTo=function(t,e,o){var s=this,a=this,l=a.scrollLeft,u=a.scrollTop,c=o==null?void 0:o.absolute;this._scrollToType("horizontal",t,c),this._scrollToType("vertical",e,c);var h=this.scrollLeft,f=this.scrollTop;this.render();var d=this.getScrollLeft(),v=this.getScrollTop();return this._emitScrollEvent(d,v,o==null?void 0:o.zoom),Math.round(l)!==h||Math.round(u)!==f?(this.isLoop=!0,this.move(h,f),requestAnimationFrame(function(){if(s.isLoop){s.isLoop=!1;var m=s.wrapperElement,g=m.scrollLeft,_=m.scrollTop;s.scrollLeft=g,s.scrollTop=_,(h!==Math.round(g)||f!==Math.round(_))&&s._scrollTo(d,v)}}),!1):!0},n._scrollToType=function(t,e,o){var s=ur[t],a=this,l=a.margin,u=l===void 0?A.margin:l,c=a.threshold,h=c===void 0?A.threshold:c,f=this["scroll".concat(s.pos)],d=this["getRange".concat(s.coord)](!0,!0),v=d[0],m=d[1],g=Math.round(f),_=this["getScrollArea".concat(s.size)](),p=this["zoom".concat(s.coord)];o&&(e=e/p);var w=e*p;if(v===m)g=v,e=v/p;else if(w-h<=v){var y=Math.max(0,w-v);g=y,e=(v+y)/p}else if(w+h>=m){var E=Math.max(0,m-w);g=_-E,e=(m-E)/p}else g<h?g+=u:g>_-h&&(g-=u);g=Math.round(g),this["scroll".concat(s.pos)]=g,this["offset".concat(s.coord)]=e-g/p},n._getRangeCoord=function(t,e,o){var s=this,a=s.margin,l=a===void 0?A.margin:a,u=s.threshold,c=ur[t],h=cr(this["range".concat(c.coord)],A["range".concat(c.coord)]),f=cr(this["rangeOffset".concat(c.coord)],A["rangeOffset".concat(c.coord)]),d=this["zoom".concat(c.coord)],v=hi(this["getScroll".concat(c.pos)](),l,h,u,o);return e?[v[0]*d+f[0],this.options.useOverflowScroll?Math.max(this["viewport".concat(c.size)]*d-this["container".concat(c.size)],v[1]*d+f[1]):v[1]*d+f[1]]:[v[0]+f[0],v[1]+f[1]]},n._emitScrollEvent=function(t,e,o){var s=this._asLeft,a=this._asTop;!o&&s===t&&a===e||(this._asLeft=t,this._asTop=e,this.trigger("scroll",{scrollLeft:t,scrollTop:e,zoomX:this.zoomX,zoomY:this.zoomY}))},n._getScrollRangeX=function(){var t=this.getScrollLeft(),e=this.rangeX,o=e[0],s=e[1];this.useOverflowScroll&&isFinite(s)&&(s=Math.max(s,this.viewportWidth-this.containerWidth/this.zoomX));var a=Math.min(0,isFinite(o)?Math.min(o,t):t),l=Math.max(0,isFinite(s)?Math.max(s,t):t),u=this.viewportScrollWidth,c=Math.max(this.containerWidth/this.zoomX,u)-u,h=Math.min(0,c+a);return[h,l]},n._getScrollRangeY=function(){var t=this.getScrollTop(),e=this.rangeY,o=e[0],s=e[1];this.useOverflowScroll&&isFinite(s)&&(s=Math.max(s,this.viewportHeight-this.containerHeight/this.zoomY));var a=Math.min(0,isFinite(o)?Math.min(o,t):t),l=Math.max(0,isFinite(s)?Math.max(s,t):t),u=this.viewportScrollHeight,c=Math.max(this.containerHeight/this.zoomY,u)-u,h=Math.min(0,c+a);return[h,l]},r=ii([_e(Br,function(t,e){var o={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},s=Pr("set ".concat(e));t[s]?o.set=function(a){this[s](a)}:o.set=function(a){this.options[e]=a},Object.defineProperty(t,e,o)})],r),r}(Ye),di=function(i){Ge(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(vi),gi=function(){function i(){this.keys=[],this.values=[]}var r=i.prototype;return r.get=function(n){return this.values[this.keys.indexOf(n)]},r.set=function(n,t){var e=this.keys,o=this.values,s=e.indexOf(n),a=s===-1?e.length:s;e[a]=n,o[a]=t},i}(),pi=function(){function i(){this.object={}}var r=i.prototype;return r.get=function(n){return this.object[n]},r.set=function(n,t){this.object[n]=t},i}(),mi=typeof Map=="function",_i=function(){function i(){}var r=i.prototype;return r.connect=function(n,t){this.prev=n,this.next=t,n&&(n.next=this),t&&(t.prev=this)},r.disconnect=function(){var n=this.prev,t=this.next;n&&(n.next=t),t&&(t.prev=n)},r.getIndex=function(){for(var n=this,t=-1;n;)n=n.prev,++t;return t},i}();function wi(i,r){var n=[],t=[];return i.forEach(function(e){var o=e[0],s=e[1],a=new _i;n[o]=a,t[s]=a}),n.forEach(function(e,o){e.connect(n[o-1])}),i.filter(function(e,o){return!r[o]}).map(function(e,o){var s=e[0],a=e[1];if(s===a)return[0,0];var l=n[s],u=t[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,n[0]);var h=l.getIndex();return[c,h]})}var yi=function(){function i(n,t,e,o,s,a,l,u){this.prevList=n,this.list=t,this.added=e,this.removed=o,this.changed=s,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var r=i.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var n=wi(this.changedBeforeAdded,this.fixed),t=this.changed,e=[];this.cacheOrdered=n.filter(function(o,s){var a=o[0],l=o[1],u=t[s],c=u[0],h=u[1];if(a!==l)return e.push([c,h]),!0}),this.cachePureChanged=e},i}();function Fr(i,r,n){var t=mi?Map:n?pi:gi,e=n||function(p){return p},o=[],s=[],a=[],l=i.map(e),u=r.map(e),c=new t,h=new t,f=[],d=[],v={},m=[],g=0,_=0;return l.forEach(function(p,w){c.set(p,w)}),u.forEach(function(p,w){h.set(p,w)}),l.forEach(function(p,w){var y=h.get(p);typeof y>"u"?(++_,s.push(w)):v[y]=_}),u.forEach(function(p,w){var y=c.get(p);typeof y>"u"?(o.push(w),++g):(a.push([y,w]),_=v[w]||0,f.push([y-_,w-g]),d.push(w===y),y!==w&&m.push([y,w]))}),s.reverse(),new yi(i,r,o,s,m,a,f,d)}var be=function(i,r){return be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},be(i,r)};function kt(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");be(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var U=function(){return U=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},U.apply(this,arguments)};function Hr(i,r){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&r.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(i);e<t.length;e++)r.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(i,t[e])&&(n[t[e]]=i[t[e]]);return n}function vr(i,r,n){for(var t=0,e=r.length,o;t<e;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return i.concat(o||Array.prototype.slice.call(r))}function dr(i){var r=0;return i.map(function(n){return n==null?"$compat".concat(++r):"".concat(n)})}function jr(i){var r=[];return i.forEach(function(n){r=r.concat(at(n)?jr(n):n)}),r}function fe(i,r){if(!r)return i;for(var n in r)Pn(i[n])&&(i[n]=r[n]);return i}function Ut(i,r){if(i===r)return!1;for(var n in i)if(!(n in r))return!0;for(var n in r)if(i[n]!==r[n])return!0;return!1}function gr(i){var r=i.className,n=Hr(i,["className"]);return r!=null&&(n.class=r),delete n.style,delete n.children,n}function pr(i){var r={},n={};for(var t in i)t.indexOf("on")===0?n[t]=i[t]:r[t]=i[t];return[r,n]}function Jt(i){if(!i)return null;var r=i.b;return Mt(r)?r:Jt(i.c)}function Zr(i){var r=i.parentNode;r&&r.removeChild(i)}function Vr(i){i.forEach(function(r){r()})}function Si(){return this.constructor(this.props,this.context)}var Le=0,Qt=function(){function i(n,t,e,o,s,a,l){l===void 0&&(l={}),this.t=n,this.d=t,this.k=e,this.i=o,this.c=s,this.ref=a,this.ps=l,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var r=i.prototype;return r.s=function(){return!0},r.u=function(n,t,e,o,s){var a=this,l=a.d,u=Xn(t).filter(function(v){return v.$_req}),c=jr(u.map(function(v){return v.$_subs})),h=Nt(c,function(v){return v.d===l});if(a.b&&!nt(e)&&!s&&!a.s(e.props,o)&&!h){var f=c.reduce(function(v,m){var g=m.d;return v[0]?v[0].d===g&&v.push(m):g>l&&v.push(m),v},[]);return f.forEach(function(v){At(v,v._ps,[v.o],n,t,!0)}),!1}a.o=e,a.ss(o);var d=a.ps;return nt(e)||(a.ps=e.props,a.ref=e.ref),$e(this),a.r(n,t,a.b?d:{},o),!0},r.md=function(){this.rr()},r.ss=function(){},r.ud=function(){this.rr()},r.rr=function(){var n=this,t=n.ref,e=n.fr;t&&t(e?e.current:n.b)},i}();function Nr(){return Object.__CROACT_CURRENT_INSTNACE__}function bi(){return Le}function Ei(i){Le=i}function $e(i){return Object.__CROACT_CURRENT_INSTNACE__=i,Le=0,i}var We=function(){function i(n,t){n===void 0&&(n={}),this.props=n,this.context=t,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var r=i.prototype;return r.render=function(){return null},r.shouldComponentUpdate=function(n,t){return this.props!==n||this.state!==t},r.setState=function(n,t,e){var o=this;o.$_timer||(o.$_state={}),clearTimeout(o.$_timer),o.$_timer=0,o.$_state=U(U({},o.$_state),n),e?o.$_setState(t,e):o.$_timer=window.setTimeout(function(){o.$_timer=0,o.$_setState(t,e)})},r.forceUpdate=function(n){this.setState({},n,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(n,t){},r.componentWillUnmount=function(){},r.$_setState=function(n,t){var e=[],o=this.$_p,s=At(o.c,[o],[o.o],e,o._cs,U(U({},this.state),this.$_state),t);s&&(n&&e.push(n),Vr(e),$e(null))},i}(),Ur=function(i){kt(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}var n=r.prototype;return n.shouldComponentUpdate=function(t,e){return Ut(this.props,t)||Ut(this.state,e)},r}(We);function Be(i){var r=function(n){r.current=n};return r.current=i,r}function zi(i){return i._fr=!0,i}function Ci(i,r,n,t){var e,o;return!((e=i==null?void 0:i.prototype)===null||e===void 0)&&e.render?o=new i(r,n):(o=new We(r,n),o.constructor=i,i._fr?(t.fr=Be(),o.render=function(){return this.constructor(this.props,t.fr)}):o.render=Si),o.$_p=t,o}var Pi=function(i){kt(r,i);function r(t,e,o,s,a,l,u){u===void 0&&(u={});var c=i.call(this,t,e,o,s,a,l,fe(u,t.defaultProps))||this;return c.typ="comp",c._usefs=[],c._uefs=[],c._defs=[],c}var n=r.prototype;return n.s=function(t,e){var o=this.b;return o.shouldComponentUpdate(fe(t,this.t.defaultProps),e||o.state)!==!1},n.r=function(t,e,o){var s,a,l=this,u=l.t;l.ps=fe(l.ps,l.t.defaultProps);var c=l.ps,h=!l.b,f=u.contextType,d=l.b,v=f==null?void 0:f.get(l);l._cs=e,h?(d=Ci(u,c,v,l),l.b=d):(d.props=c,d.context=v);var m=d.state;l._usefs=[],l._uefs=[];var g=d.render();((a=(s=g==null?void 0:g.props)===null||s===void 0?void 0:s.children)===null||a===void 0?void 0:a.length)===0&&(g.props.children=l.ps.children);var _=U(U({},e),d.$_cs);At(l,l._ps,g?[g]:[],t,_),h?l._uefs.push(function(){f==null||f.register(l),d.componentDidMount()}):l._uefs.push(function(){d.componentDidUpdate(o,m)}),t.push(function(){l._usefs.forEach(function(p){p()}),h?l.md():l.ud(),l._defs=l._uefs.map(function(p){return p()})})},n.ss=function(t){var e=this.b;!e||!t||(e.state=t)},n.un=function(){var t,e=this;e._ps.forEach(function(s){s.un()});var o=e.t;(t=o.contextType)===null||t===void 0||t.unregister(e),clearTimeout(e.b.$_timer),e._defs.forEach(function(s){s&&s()}),e.b.componentWillUnmount()},r}(Qt);function xi(i,r,n){var t=Ie(gr(i),gr(r)),e=t.added,o=t.removed,s=t.changed;for(var a in e)n.setAttribute(a,e[a]);for(var l in s)n.setAttribute(l,s[l][1]);for(var u in o)n.removeAttribute(u)}function Ti(i,r,n){var t=Ie(i,r),e=t.added,o=t.removed;for(var s in o)n.e(s,!0);for(var a in e)n.e(a)}function Ie(i,r){var n=ge(i),t=ge(r),e=Fr(n,t,function(l){return l}),o={},s={},a={};return e.added.forEach(function(l){var u=t[l];o[u]=r[u]}),e.removed.forEach(function(l){var u=n[l];s[u]=i[u]}),e.maintained.forEach(function(l){var u=l[0],c=n[u],h=[i[c],r[c]];i[c]!==r[c]&&(a[c]=h)}),{added:o,removed:s,changed:a}}function Oi(i,r,n){var t=n.style,e=Ie(i,r),o=e.added,s=e.removed,a=e.changed;for(var l in o){var u=ae(l,"-");t.setProperty(u,o[l])}for(var l in a){var c=ae(l,"-");t.setProperty(c,a[l][1])}for(var l in s){var h=ae(l,"-");t.removeProperty(h)}}function Di(i){return i.replace(/^on/g,"").toLowerCase()}var Ri=function(i){kt(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.typ="elem",t._es={},t._svg=!1,t}var n=r.prototype;return n.e=function(t,e){var o=this,s=o._es,a=o.b,l=Di(t);e?(O(a,l,s[t]),delete s[t]):(s[t]=function(u){var c,h;(h=(c=o.ps)[t])===null||h===void 0||h.call(c,u)},D(a,l,s[t]))},n.s=function(t){return Ut(this.ps,t)},n.r=function(t,e,o){var s,a=this,l=!a.b,u=a.ps;if(l){var c=Jt(a.c),h=!1;a._svg||a.t==="svg"?h=!0:h=c&&c.ownerSVGElement,a._svg=h;var f=(s=a._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],d=a.t;if(f)a._hyd=[].slice.call(f.children||[]);else{var v=Xt(c);h?f=v.createElementNS("http://www.w3.org/2000/svg",d):f=v.createElement(d)}a.b=f}At(a,a._ps,u.children,t,e);var m=a.b,g=pr(o),_=g[0],p=g[1],w=pr(u),y=w[0],E=w[1];return xi(_,y,m),Ti(p,E,a),Oi(o.style||{},u.style||{},m),t.push(function(){l?a.md():a.ud()}),!0},n.un=function(){var t=this,e=t._es,o=t.b;for(var s in e)O(o,s,e[s]);t._ps.forEach(function(a){a.un()}),t._es={},t._sel||Zr(o)},r}(Qt);function Yt(i){if(!i||Mt(i))return i;var r=i.$_p._ps;return r.length?Yt(r[0].b):null}function qr(i){if(i){if(i.b&&Mt(i.b))return i;var r=i._ps;return r.length?qr(r[0]):null}}function F(i,r){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];var e=r||{},o=e.key,s=e.ref,a=Hr(e,["key","ref"]);return{type:i,key:o,ref:s,props:U(U({},a),{children:kn(n).filter(function(l){return l!=null&&l!==!1})})}}var Kr=function(i){kt(r,i);function r(t,e){e===void 0&&(e=0);var o=i.call(this,"container",e,"container",0,null)||this;return o.typ="container",o.b=t,o}var n=r.prototype;return n.r=function(){return!0},n.un=function(){},r}(Qt),Mi=function(i){kt(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.typ="text",t}var n=r.prototype;return n.r=function(t){var e,o=this,s=!o.b;if(s){var a=Jt(o.c),l=(e=o._hyd)===null||e===void 0?void 0:e.splice(0,1)[0];o.b=l||Xt(a).createTextNode(o.t.replace("text_",""))}return t.push(function(){s?o.md():o.ud()}),!0},n.un=function(){Zr(this.b)},r}(Qt);function Yi(i,r,n){var t=n.map(function(l){return nt(l)?null:l.key}),e=dr(r.map(function(l){return l.k})),o=dr(t),s=Fr(e,o,function(l){return l});s.removed.forEach(function(l){r.splice(l,1)[0].un()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],h=r.splice(u,1)[0];r.splice(c,0,h);var f=Yt(h.b),d=Yt(r[c+1]&&r[c+1].b);f&&f.parentNode.insertBefore(f,d)}),s.added.forEach(function(l){r.splice(l,0,mr(n[l],t[l],l,i))});var a=s.maintained.filter(function(l){l[0];var u=l[1],c=n[u],h=r[u],f=nt(c)?"text_".concat(c):c.type;return f!==h.t?(h.un(),r.splice(u,1,mr(c,t[u],u,i)),!0):(h.i=u,!1)});return vr(vr([],s.added,!0),a.map(function(l){l[0];var u=l[1];return u}))}function Xi(i,r){for(var n=i._ps,t=n.length,e=r.i+1;e<t;++e){var o=Yt(n[e].b);if(o)return o}return null}function mr(i,r,n,t){var e=t.d+1;if(nt(i)||xn(i))return new Mi("text_".concat(i),e,r,n,t,null,{});var o=i.type,s=typeof o=="string"?Ri:Pi;return new s(o,e,r,n,t,i.ref,i.props)}function At(i,r,n,t,e,o,s){var a=Yi(i,r,n),l=i._hyd,u=r.filter(function(h,f){return h._hyd=l,h.u(t,e,n[f],o,s)});i.typ==="container"&&i._sel&&r.forEach(function(h){var f=qr(h);f&&(f._sel=!0)}),i._hyd=null;var c=Jt(i);return c&&a.reverse().forEach(function(h){var f=r[h],d=Yt(f.b);if(d&&c!==d&&!d.parentNode){var v=Xi(i,f);c.insertBefore(d,v)}}),u.length>0}function ki(i,r,n,t){n===void 0&&(n=r.__CROACT__),t===void 0&&(t={});var e=!!n;n||(n=new Kr(r));var o=[];return At(n,n._ps,i?[i]:[],o,t,void 0,void 0),Vr(o),$e(null),e||(r.__CROACT__=n),n}function _r(i,r,n){return!n&&i&&(n=new Kr(r.parentElement),n._hyd=[r],n._sel=!0),ki(i,r,n),n}function Jr(i){var r=Nr(),n=r._hs||(r._hs=[]),t=bi(),e=n[t];if(Ei(t+1),e){if(!Ut(e.deps,i.deps))return e.updated=!1,e;n[t]=i}else n.push(i);return i.value=i.func(),i.updated=!0,i}function Ai(i,r){var n=Jr({func:i,deps:r});return n.value}function Gi(i){return Ai(function(){return Be(i)},[])}function Qr(i,r,n){var t=Nr(),e=Jr({func:function(){return i},deps:r}),o=n?t._usefs:t._uefs;e.updated?o.push(function(){return e.effect&&e.effect(),e.effect=i(),e.effect}):o.push(function(){return e.effect})}function Li(i,r,n){Qr(function(){i==null||i(r())},n,!0)}var Ee=function(i,r){return Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},Ee(i,r)};function $i(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Ee(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Wi=function(i){$i(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t._zoom=0,t._rulerScale=0,t._observer=null,t._checkResize=function(){t.resize()},t}var n=r.prototype;return n.render=function(){var t=this.props;return this._zoom=t.zoom,F("canvas",{ref:rt(this,"canvasElement"),style:this.props.style})},n.componentDidMount=function(){var t=this.props;this.state.scrollPos=t.defaultScrollPos||0;var e=this.canvasElement,o=e.getContext("2d",{alpha:!0});this.canvasContext=o,t.useResizeObserver?(this._observer=new ResizeObserver(this._checkResize),this._observer.observe(e,{box:"border-box"})):this.resize()},n.componentDidUpdate=function(){this.resize()},n.componentWillUnmount=function(){var t;this.state.scrollPos=0,(t=this._observer)===null||t===void 0||t.disconnect()},n.getScrollPos=function(){return this.state.scrollPos},n.scroll=function(t,e){this.draw({scrollPos:t,zoom:e})},n.resize=function(t){var e=this.canvasElement,o=this.props,s=o.width,a=o.height,l=o.scrollPos,u=this._getRulerScale();this.width=s||e.offsetWidth,this.height=a||e.offsetHeight,e.width=this.width*u,e.height=this.height*u,this.draw({scrollPos:l,zoom:t})},n.draw=function(t){t===void 0&&(t={});var e=this.props,o=t.zoom,s=o===void 0?this._zoom:o,a=t.scrollPos,l=a===void 0?this.state.scrollPos:a,u=t.marks,c=u===void 0?e.marks:u,h=t.selectedRanges,f=h===void 0?e.selectedRanges:h,d=t.segment,v=d===void 0?e.segment||10:d,m=t.unit,g=m===void 0?e.unit:m;this._zoom=s;var _=e,p=_.type,w=_.backgroundColor,y=_.lineColor,E=_.textColor,C=_.textBackgroundColor,b=_.direction,P=_.negativeRuler,x=P===void 0?!0:P,R=_.textFormat,M=_.range,z=M===void 0?[-1/0,1/0]:M,T=_.rangeBackgroundColor,X=_.selectedBackgroundColor,ft=_.lineWidth,ht=ft===void 0?1:ft,yt=_.selectedRangesText,vt=_.selectedRangesTextColor,Gt=vt===void 0?"#44aaff":vt,He=_.selectedRangesTextOffset,nn=He===void 0?[0,0]:He,je=_.markColor,on=je===void 0?"#ff5":je,dt=this._getRulerScale(),St=this.width,bt=this.height,sn=this.state;sn.scrollPos=l;var S=this.canvasContext,W=p==="horizontal",Ze=x!==!1,an=e.font||"10px sans-serif",te=e.textAlign||"left",ln=e.textOffset||[0,0],Et=W?bt:St,ee=$("".concat(e.mainLineSize||"100%"),Et),un=$("".concat(e.longLineSize||10),Et),cn=$("".concat(e.shortLineSize||7),Et),k=e.lineOffset||[0,0];switch(w==="transparent"?S.clearRect(0,0,St*dt,bt*dt):(S.rect(0,0,St*dt,bt*dt),S.fillStyle=w,S.fill()),S.save(),S.scale(dt,dt),S.strokeStyle=y,S.lineWidth=ht,S.font=an,S.fillStyle=E,S.textAlign=te,b){case"start":S.textBaseline="top";break;case"center":S.textBaseline="middle";break;case"end":S.textBaseline="bottom";break}S.translate(.5,0),S.beginPath();for(var Lt=W?St:bt,$t=s*g,re=Math.floor(l*s/$t),fn=Math.ceil((l*s+Lt)/$t),Ve=fn-re,Ne=Math.max(["left","center","right"].indexOf(te)-1,-1),tt=W?bt:St,zt=[],it=0;it<=Ve;++it){var gt=(it+re)*g,ne="".concat(gt);R&&(ne=R(gt));var hn=S.measureText(ne).width;zt.push({color:E,offset:ln,backgroundColor:C,value:gt,text:ne,textSize:hn})}if(X!=="transparent"&&(f!=null&&f.length)&&f.forEach(function(G){var B=Math.max(G[0],z[0],x?-1/0:0),j=Math.min(G[1],z[1]),q=(B-l)*s,K=(j-B)*s;yt&&G.forEach(function(Z){var V="".concat(Z);R&&(V=R(Z));var J=S.measureText(V).width,et=Z*s,It=et+J;Yn(zt,function(mt,Pt){var ot=mt.value,pn=mt.textSize,er=ot*s,mn=er+pn;er<=It&&et<=mn&&zt.splice(Pt,1)}),zt.push({value:Z,color:Gt,offset:nn,text:V,textSize:J})}),!(K<=0)&&(S.save(),S.fillStyle=X,W?S.fillRect(q,0,K,tt):S.fillRect(0,q,tt,K),S.restore())}),T!=="transparent"&&z[0]!==-1/0&&z[1]!==1/0){var Ue=(z[0]-l)*s,qe=(z[1]-z[0])*s;S.save(),S.fillStyle=T,W?S.fillRect(Ue,0,qe,tt):S.fillRect(0,Ue,tt,qe),S.restore()}for(var it=0;it<=Ve;++it){var gt=it+re;if(!(!Ze&&gt<0))for(var Ke=gt*g,vn=(Ke-l)*s,pt=0;pt<v;++pt){var Wt=vn+pt/v*$t,Je=Ke+pt/v*g;if(!(Wt<0||Wt>=Lt||Je<z[0]||Je>z[1])){var Bt=pt===0?ee:pt%2===0?un:cn,Ct=0;switch(b){case"start":Ct=0;break;case"center":Ct=tt/2-Bt/2;break;case"end":Ct=tt-Bt;break}var Qe=W?[Wt+k[0],Ct+k[1]]:[Ct+k[0],Wt+k[1]],ie=Qe[0],oe=Qe[1],tr=W?[ie,oe+Bt]:[ie+Bt,oe],dn=tr[0],gn=tr[1];S.moveTo(ie+k[0],oe+k[1]),S.lineTo(dn+k[0],gn+k[1])}}}S.stroke(),S.beginPath(),S.strokeStyle=on,S.lineWidth=1,(c||[]).forEach(function(G){var B=(-l+G)*s;if(!(B<0||B>=Lt||G<z[0]||G>z[1])){var j=W?[B+k[0],k[1]]:[k[0],B+k[1]],q=j[0],K=j[1],Z=W?[q,K+Et]:[q+Et,K],V=Z[0],J=Z[1];S.moveTo(q+k[0],K+k[1]),S.lineTo(V+k[0],J+k[1])}}),S.stroke(),zt.forEach(function(G){var B=G.value,j=G.offset,q=G.backgroundColor,K=G.color,Z=G.text,V=G.textSize;if(!(!Ze&&B<0)){var J=(B-l)*s;if(!(J<-$t||J>=Lt+g*s||B<z[0]||B>z[1])){var et=0;switch(b){case"start":et=17;break;case"center":et=tt/2;break;case"end":et=tt-17;break}var It=W?[J+Ne*-3,et]:[et,J+Ne*3],mt=It[0],Pt=It[1];if(q){var ot=0;switch(te){case"left":ot=0;break;case"center":ot=-V/2;break;case"right":ot=-V;break}S.save(),S.fillStyle=q,W?S.fillRect(mt+j[0]+ot,0,V,ee):(S.translate(0,Pt+j[1]),S.rotate(-Math.PI/2),S.fillRect(ot,0,V,ee)),S.restore()}S.save(),S.fillStyle=K,W?S.fillText(Z,mt+j[0],Pt+j[1]):(S.translate(mt+j[0],Pt+j[1]),S.rotate(-Math.PI/2),S.fillText(Z,0,0)),S.restore()}}}),S.restore()},n._getRulerScale=function(){var t=this.props.defaultPixelScale||2;if(!this._rulerScale){var e=window.devicePixelRatio>1;if(!e&&window.matchMedia){var o=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");e=o&&o.matches}this._rulerScale=e?3:t}return this._rulerScale},r.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,negativeRuler:!0,mainLineSize:"100%",longLineSize:10,shortLineSize:7,segment:10,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",font:"10px sans-serif",textColor:"#ffffff",textBackgroundColor:"transparent",lineColor:"#777777",range:[-1/0,1/0],rangeBackgroundColor:"transparent",lineWidth:1,selectedBackgroundColor:"#555555",defaultScrollPos:0,markColor:"#f55",marks:[]},r}(Ur),tn=["type","width","height","unit","zoom","direction","textAlign","font","segment","mainLineSize","longLineSize","shortLineSize","lineOffset","textOffset","negativeRuler","range","scrollPos","defaultScrollPos","style","backgroundColor","rangeBackgroundColor","lineColor","textColor","textBackgroundColor","textFormat","warpSelf","selectedBackgroundColor","selectedRanges","defaultPixelScale","useResizeObserver","selectedRangesText","selectedRangesTextColor","selectedRangesTextOffset","marks","markColor"],ze=function(){return ze=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},ze.apply(this,arguments)};function Bi(i,r){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&r.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(i);e<t.length;e++)r.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(i,t[e])&&(n[t[e]]=i[t[e]]);return n}function Ii(i,r){var n=Or(r),t=n.className;return zi(function(e,o){var s=e.className,a=s===void 0?"":s;e.cspNonce;var l=Bi(e,["className","cspNonce"]),u=Gi();return Li(o,function(){return u.current},[]),Qr(function(){var c=n.inject(u.current,{nonce:e.cspNonce});return function(){c.destroy()}},[]),F(i,ze({ref:u,"data-styled-id":t,className:"".concat(a," ").concat(t)},l))})}function Fi(i,r,n,t,e,o){for(var s=0;s<e;++s){var a=n+s*e,l=t+s*e;i[a]+=i[l]*o,r[a]+=r[l]*o}}function Hi(i,r,n,t,e){for(var o=0;o<e;++o){var s=n+o*e,a=t+o*e,l=i[s],u=r[s];i[s]=i[a],i[a]=l,r[s]=r[a],r[a]=u}}function ji(i,r,n,t,e){for(var o=0;o<t;++o){var s=n+o*t;i[s]/=e,r[s]/=e}}function Zi(i,r){for(var n=i.slice(),t=en(r),e=0;e<r;++e){var o=r*e+e;if(!Vt(n[o],se)){for(var s=e+1;s<r;++s)if(n[r*e+s]){Hi(n,t,e,s,r);break}}if(!Vt(n[o],se))return[];ji(n,t,e,r,n[o]);for(var s=0;s<r;++s){var a=s,l=s+e*r,u=n[l];!Vt(u,se)||e===s||Fi(n,t,a,e,r,-u)}}return t}function ct(i,r,n){n===void 0&&(n=Math.sqrt(i.length));var t=[],e=i.length/n,o=r.length/e;if(e){if(!o)return i}else return r;for(var s=0;s<n;++s)for(var a=0;a<o;++a){t[a*n+s]=0;for(var l=0;l<e;++l)t[a*n+s]+=i[l*n+s]*r[a*e+l]}return t}function Vi(i,r,n){var t=ct(i,r,n),e=t[n-1];return t.map(function(o){return o/e})}function Ni(i,r){return ct(i,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function Ui(i,r){return ct(i,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function qi(i,r){return ct(i,Ki(r,4))}function Zt(i,r){var n=r[0],t=n===void 0?1:n,e=r[1],o=e===void 0?1:e,s=r[2],a=s===void 0?1:s;return ct(i,[t,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1],4)}function he(i,r){var n=r[0],t=n===void 0?0:n,e=r[1],o=e===void 0?0:e,s=r[2],a=s===void 0?0:s;return ct(i,[1,0,0,0,0,1,0,0,0,0,1,0,t,o,a,1],4)}function Ce(i,r){return ct(i,r,4)}function Ki(i,r){var n=Math.cos(i),t=Math.sin(i),e=en(r);return e[0]=n,e[1]=t,e[r]=-t,e[r+1]=n,e}function en(i){for(var r=i*i,n=[],t=0;t<r;++t)n[t]=t%(i+1)?0:1;return n}var Dt=function(){return Dt=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Dt.apply(this,arguments)};function rn(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ji(i,r){return r===void 0&&(r=0),to(eo(i,r))}function wr(i,r){var n=Vi(i,[r[0],r[1]||0,r[2]||0,1],4),t=n[3]||1;return[n[0]/t,n[1]/t,n[2]/t]}function Qi(i,r){r===void 0&&(r=document.body);for(var n=i,t=rn();n;){var e=getComputedStyle(n).transform;if(t=Ce(Ji(e),t),n===r)break;n=n.parentElement}return t=Zi(t,4),t[12]=0,t[13]=0,t[14]=0,t}function to(i){var r=rn();return i.forEach(function(n){var t=n.matrixFunction,e=n.functionValue;t&&(r=t(r,e))}),r}function eo(i,r){r===void 0&&(r=0);var n=at(i)?i:Dn(i);return n.map(function(t){var e=Rn(t),o=e.prefix,s=e.value,a=null,l=o,u="";if(o==="translate"||o==="translateX"||o==="translate3d"){var c=H(r)?Dt(Dt({},r),{"o%":r["%"]}):{"%":r,"o%":r},h=xt(s).map(function(T,X){return X===0&&"x%"in c?c["%"]=r["x%"]:X===1&&"y%"in c?c["%"]=r["y%"]:c["%"]=r["o%"],$(T,c)}),f=h[0],d=h[1],v=d===void 0?0:d,m=h[2],g=m===void 0?0:m;a=he,u=[f,v,g]}else if(o==="translateY"){var _=H(r)?Dt({"%":r["y%"]},r):{"%":r},v=$(s,_);a=he,u=[0,v,0]}else if(o==="translateZ"){var g=parseFloat(s);a=he,u=[0,0,g]}else if(o==="scale"||o==="scale3d"){var p=xt(s).map(function(T){return parseFloat(T)}),w=p[0],y=p[1],E=y===void 0?w:y,C=p[2],b=C===void 0?1:C;a=Zt,u=[w,E,b]}else if(o==="scaleX"){var w=parseFloat(s);a=Zt,u=[w,1,1]}else if(o==="scaleY"){var E=parseFloat(s);a=Zt,u=[1,E,1]}else if(o==="scaleZ"){var b=parseFloat(s);a=Zt,u=[1,1,b]}else if(o==="rotate"||o==="rotateZ"||o==="rotateX"||o==="rotateY"){var P=Cr(s),x=P.unit,R=P.value,M=x==="rad"?R:R*Math.PI/180;o==="rotate"||o==="rotateZ"?(l="rotateZ",a=qi):o==="rotateX"?a=Ni:o==="rotateY"&&(a=Ui),u=M}else if(o==="matrix3d")a=Ce,u=xt(s).map(function(T){return parseFloat(T)});else if(o==="matrix"){var z=xt(s).map(function(T){return parseFloat(T)});a=Ce,u=[z[0],z[1],0,0,z[2],z[3],0,0,0,0,1,0,z[4],z[5],0,1]}else l="";return{name:o,functionName:l,value:s,matrixFunction:a,functionValue:u}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pe=function(){return Pe=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Pe.apply(this,arguments)};function ro(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var t=Array(i),e=0,r=0;r<n;r++)for(var o=arguments[r],s=0,a=o.length;s<a;s++,e++)t[e]=o[s];return t}var no=function(){function i(){this._events={}}var r=i.prototype;return r.on=function(n,t){if(H(n))for(var e in n)this.on(e,n[e]);else this._addEvent(n,t,{});return this},r.off=function(n,t){if(!n)this._events={};else if(H(n))for(var e in n)this.off(e);else if(!t)this._events[n]=[];else{var o=this._events[n];if(o){var s=Kt(o,function(a){return a.listener===t});s>-1&&o.splice(s,1)}}return this},r.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(o){e._addEvent(n,o,{once:!0})})},r.emit=function(n,t){var e=this;t===void 0&&(t={});var o=this._events[n];if(!n||!o)return!0;var s=!1;return t.eventType=n,t.stop=function(){s=!0},t.currentTarget=this,ro(o).forEach(function(a){a.listener(t),a.once&&e.off(n,a.listener)}),!s},r.trigger=function(n,t){return t===void 0&&(t={}),this.emit(n,t)},r._addEvent=function(n,t,e){var o=this._events;o[n]=o[n]||[];var s=o[n];s.push(Pe({listener:t},e))},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xe=function(i,r){return xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},xe(i,r)};function io(i,r){xe(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var _t=function(){return _t=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},_t.apply(this,arguments)};function oo(i){var r=i.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function ve(i){if(i){if(nt(i))return document.querySelector(i)}else return null;if(Er(i))return i();if(i instanceof Element)return i;if("current"in i)return i.current;if("value"in i)return i.value}var so=function(i){io(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t._startRect=null,t._startPos=[],t._prevTime=0,t._timer=0,t._prevScrollPos=[0,0],t._isWait=!1,t._flag=!1,t}var n=r.prototype;return n.dragStart=function(t,e){var o=ve(e.container);if(!o){this._flag=!1;return}var s=0,a=0,l=0,u=0;if(o===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=o.getBoundingClientRect();s=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:s,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],e)},n.drag=function(t,e){if(clearTimeout(this._timer),!!this._flag){var o=t.clientX,s=t.clientY,a=e.threshold,l=a===void 0?0:a,u=this,c=u._startRect,h=u._startPos,f=[0,0];return c.top>s-l?(h[1]>c.top||s<h[1])&&(f[1]=-1):c.top+c.height<s+l&&(h[1]<c.top+c.height||s>h[1])&&(f[1]=1),c.left>o-l?(h[0]>c.left||o<h[0])&&(f[0]=-1):c.left+c.width<o+l&&(h[0]<c.left+c.width||o>h[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(_t(_t({},e),{direction:f,inputEvent:t,isDrag:!0}))}},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var o=t.prevScrollPos,s=o===void 0?this._prevScrollPos:o,a=t.direction,l=t.throttleTime,u=l===void 0?0:l,c=t.inputEvent,h=t.isDrag,f=this._getScrollPosition(a||[0,0],t),d=f[0]-s[0],v=f[1]-s[1],m=a||[d?Math.abs(d)/d:0,v?Math.abs(v)/v:0];return this._prevScrollPos=f,!d&&!v?!1:(this.trigger("move",{offsetX:m[0]?d:0,offsetY:m[1]?v:0,inputEvent:c}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){e._continueDrag(t)},u)),!0)},n.dragEnd=function(){this._flag=!1,clearTimeout(this._timer)},n._getScrollPosition=function(t,e){var o=e.container,s=e.getScrollPosition,a=s===void 0?oo:s;return a({container:ve(o),direction:t})},n._continueDrag=function(t){var e=this,o,s,a=t.container,l=t.direction,u=t.throttleTime,c=t.useScroll,h=t.isDrag,f=t.inputEvent;if(!(!this._flag||h&&this._isWait)){var d=de(),v=Math.max(u+this._prevTime-d,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){e._continueDrag(t)},v),!1;this._prevTime=d;var m=this._getScrollPosition(l,t);this._prevScrollPos=m,h&&(this._isWait=!0);var g={container:ve(a),direction:l,inputEvent:f};return(s=(o=t).requestScroll)===null||s===void 0||s.call(o,g),this.trigger("scroll",g),this._isWait=!1,c||this.checkScroll(_t(_t({},t),{prevScrollPos:m,direction:l,inputEvent:f}))}},r}(no),Te=function(i,r){return Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},Te(i,r)};function ao(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Te(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var L=function(){return L=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},L.apply(this,arguments)};function Rt(i,r,n){if(n||arguments.length===2)for(var t=0,e=r.length,o;t<e;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return i.concat(o||Array.prototype.slice.call(r))}function Q(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return jn.apply(void 0,Rt(["scena-guides-"],i,!1))}var lo=Q("guide","adder"),uo=Q("guides"),co=Q("guide"),yr=Q("dragging"),fo=Q("display-drag"),ho=Tr("scena-guides-",`
{
    position: relative;
    width: 100%;
    height: 100%;
}
canvas {
    position: relative;
}
.guide-origin {
    position: absolute;
    width: 1px;
    height: 1px;
    top: 0;
    left: 0;
    opacity: 0;
}
.guides {
    position: absolute;
    bottom: 0;
    right: 0;
    will-change: transform;
    z-index: 2000;
}
.guide-pos {
    position: absolute;
    font-weight: bold;
    font-size: 12px;
    color: #f33;
}
.horizontal .guide-pos {
    bottom: 100%;
    left: 50%;
    transform: translate(-50%);
}
.vertical .guide-pos {
    left: calc(100% + 2px);
    top: 50%;
    transform: translateY(-50%);
}
.display-drag {
    position: absolute;
    will-change: transform;
    z-index: 2000;
    font-weight: bold;
    font-size: 12px;
    display: none;
    left: 20px;
    top: -20px;
    color: #f33;
}
:host.horizontal .guides {
    width: 100%;
    height: 0;
}
:host.vertical .guides {
    height: 100%;
    width: 0;
}
:host.horizontal canvas {
    cursor: ns-resize;
}
:host.vertical canvas {
    cursor: ew-resize;
}
.guide {
    position: absolute;
    background: #f33;
    z-index: 2;
}
.guide.dragging:before {
    position: absolute;
    content: "";
    width: 100%;
    height: 100%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
:host.horizontal .guide {
    width: 100%;
    height: 1px;
    cursor: row-resize;
}
:host.vertical .guide {
    width: 1px;
    height: 100%;
    cursor: col-resize;
}
.mobile :host.horizontal .guide {
    transform: scale(1, 2);
}
.mobile :host.vertical .guide {
    transform: scale(2, 1);
}
:host.horizontal .guide:before {
    height: 20px;
}
:host.vertical .guide:before {
    width: 20px;
}
.adder {
    display: none;
}
.adder.dragging {
    display: block;
}
`),vo=Rt(["className","rulerStyle","snapThreshold","snaps","displayDragPos","cspNonce","dragPosFormat","defaultGuides","showGuides","scrollOptions","guideStyle","guidesOffset","digit","defaultGuidesPos","dragGuideStyle","displayGuidePos","guidePosFormat","guidePosStyle","lockGuides","guidesZoom"],tn,!0),go=["getGuides","loadGuides","scroll","scrollGuides","resize","getElement","getRulerElement","forceUpdate","getRulerScrollPos","getGuideScrollPos","zoomTo","drawRuler"],po=["changeGuides","requestScroll","dragStart","drag","dragEnd","clickRuler"],mo=Ii("div",ho),_o=function(i){ao(r,i);function r(t){var e=i.call(this,t)||this;return e.state={guides:[]},e.scrollPos=0,e.managerRef=Be(),e.guideElements=[],e._isFirstMove=!1,e._zoom=1,e._guidesZoom=1,e._observer=null,e.onDragStart=function(o){var s=o.datas,a=o.inputEvent;e._isFirstMove=!0,e.movePos(o),e.props.onDragStart(L(L({},o),{dragElement:s.target})),e.gesto.isFlag()&&(a.stopPropagation(),a.preventDefault(),e._startDragScroll(o))},e._onDrag=function(o){e._isFirstMove&&(e._isFirstMove=!1,lt(o.datas.target,yr));var s=e.movePos(o);if(e.props.onDrag(L(L({},o),{dragElement:o.datas.target})),!e.gesto.isFlag()){e._endDragScroll(o);return}return e._dragScroll(o),s},e.onDragEnd=function(o){var s=o.datas,a=o.isDouble,l=o.distX,u=o.distY,c=e.movePos(o),h=e.state.guides,f=e.props,d=f.onChangeGuides,v=f.displayDragPos,m=f.digit,g=f.lockGuides,_=f.guidesOffset,p=e._guidesZoom,w=parseFloat((c/p).toFixed(m||0)),y=e.scrollPos-(_||0);if(v&&(e.displayElement.style.cssText+="display: none;"),Gn(s.target,yr),e.props.onDragEnd(L(L({},o),{dragElement:s.target})),e._endDragScroll(o),s.fromRuler)e._isFirstMove&&e.props.onClickRuler(L(L({},o),{pos:0})),w>=y&&h.indexOf(w)<0&&e.setState({guides:Rt(Rt([],h,!0),[w],!1)},function(){d({guides:e.state.guides,distX:l,distY:u,index:h.length,isAdd:!0,isRemove:!1,isChange:!1})});else{var E=parseFloat(s.target.getAttribute("data-index")),C=!1,b=!1;h=Rt([],h,!0);var P=h.indexOf(w);if(a||w<y||P>-1&&P!==E){if(g&&(g===!0||g.indexOf("remove")>-1))return;h.splice(E,1),C=!0}else{if(P>-1)return;if(g&&(g===!0||g.indexOf("change")>-1))return;h[E]=w,b=!0}e.setState({guides:h},function(){var x=e.state.guides;d({distX:l,distY:u,guides:x,isAdd:!1,index:E,isChange:b,isRemove:C})})}},e._onCheck=function(){e.resize()},e.state.guides=t.defaultGuides||[],e.scrollPos=t.defaultGuidesPos||0,e}var n=r.prototype;return n.render=function(){var t=this.props,e=t.className,o=t.type,s=t.zoom,a=t.guidesZoom,l=t.style,u=t.rulerStyle,c=t.displayDragPos,h=t.cspNonce,f=t.dragGuideStyle,d=t.guidePosStyle,v=d===void 0?{}:d,m=this.props,g=this.getTranslateName(),_={};return tn.forEach(function(p){p==="style"||p==="warpSelf"||p==="useResizeObserver"||(_[p]=m[p])}),this._zoom=s,this._guidesZoom=a||s,F(mo,{ref:this.managerRef,cspNonce:h,className:"".concat(Q("manager",o)," ").concat(e),style:l},F("div",{className:Q("guide-origin"),ref:rt(this,"originElement")}),F(Wi,L({ref:rt(this,"ruler"),style:u},_)),F("div",{className:uo,ref:rt(this,"guidesElement"),style:{transform:"".concat(g,"(").concat(-this.scrollPos*this._guidesZoom,"px)")}},c&&F("div",{className:fo,ref:rt(this,"displayElement"),style:v||{}}),F("div",{className:lo,ref:rt(this,"adderElement"),style:f}),this.renderGuides()))},n.drawRuler=function(t){this.ruler.draw(t)},n.renderGuides=function(){var t=this,e=this.props,o=e,s=o.type,a=o.showGuides,l=o.guideStyle,u=o.displayGuidePos,c=o.guidePosStyle,h=c===void 0?{}:c,f=o.guidesOffset,d=this._guidesZoom,v=this.getTranslateName(),m=this.state.guides,g=e.guidePosFormat||e.dragPosFormat||function(_){return _};if(this.guideElements=[],a)return m.map(function(_,p){var w=_+(f||0);return F("div",{className:Q("guide",s),ref:Zn(t,"guideElements",p),key:p,"data-index":p,"data-pos":_,style:L(L({},l),{transform:"".concat(v,"(").concat(w*d,"px) translateZ(0px)")})},u&&F("div",{className:Q("guide-pos"),style:h||{}},g(_)))})},n.componentDidMount=function(){var t=this;this.gesto=new Xe(this.managerRef.current,{container:document.body}).on("dragStart",function(e){var o=t.props,s=o.type,a=o.lockGuides,l=t._guidesZoom;if(a===!0){e.stop();return}var u=e.inputEvent,c=u.target,h=e.datas,f=t.ruler.canvasElement,d=t.guidesElement,v=s==="horizontal",m=t.originElement.getBoundingClientRect(),g=Qi(t.managerRef.current),_=wr(g,[e.clientX-m.left,e.clientY-m.top]);_[0]-=d.offsetLeft,_[1]-=d.offsetTop,_[v?1:0]+=t.scrollPos*l,h.offsetPos=_,h.matrix=g;var p=a&&a.indexOf("add")>-1,w=a&&a.indexOf("remove")>-1,y=a&&a.indexOf("change")>-1;if(c===f){if(p){e.stop();return}h.fromRuler=!0,h.target=t.adderElement}else if(An(c,co)){if(w&&y){e.stop();return}h.target=c}else return e.stop(),!1;t.onDragStart(e)}).on("drag",this._onDrag).on("dragEnd",this.onDragEnd),this.props.useResizeObserver?(this._observer=new ResizeObserver(this._onCheck),this._observer.observe(this.guidesElement,{box:"border-box"}),this._observer.observe(this.getRulerElement(),{box:"border-box"})):this._onCheck()},n.componentWillUnmount=function(){var t;this.gesto.unset(),(t=this._observer)===null||t===void 0||t.disconnect()},n.componentDidUpdate=function(t){var e=this.props.defaultGuides;t.defaultGuides!==e&&this.setState({guides:e||[]})},n.loadGuides=function(t){this.setState({guides:t})},n.getGuides=function(){return this.state.guides},n.scrollGuides=function(t,e){e===void 0&&(e=this._guidesZoom),this._setZoom({guidesZoom:e});var o=this.getTranslateName(),s=this.guidesElement;this.scrollPos=t,s.style.transform="".concat(o,"(").concat(-t*e,"px)");var a=this.state.guides,l=this.props.guidesOffset||0;this.guideElements.forEach(function(u,c){if(u){var h=a[c]+(l||0);u.style.transform="".concat(o,"(").concat(h*e,"px) translateZ(0px)"),u.style.display=-t+h<0?"none":"block"}})},n.zoomTo=function(t,e){e===void 0&&(e=t),this.scroll(this.getRulerScrollPos(),t),this.scrollGuides(this.getGuideScrollPos(),e)},n.getElement=function(){return this.managerRef.current},n.getRulerElement=function(){return this.ruler.canvasElement},n.getGuideScrollPos=function(){return this.scrollPos},n.getRulerScrollPos=function(){return this.ruler.getScrollPos()},n.scroll=function(t,e){e===void 0&&(e=this._zoom),this._setZoom({zoom:e}),this.ruler.scroll(t,e)},n.resize=function(t){t===void 0&&(t=this._zoom),this._setZoom({zoom:t}),this.ruler.resize(t)},n.movePos=function(t){var e=t.datas,o=t.distX,s=t.distY,a=this.props,l=a.type,u=a.snaps,c=a.snapThreshold,h=a.displayDragPos,f=a.digit,d=a.guidesOffset||0,v=this._guidesZoom,m=a.dragPosFormat||function(M){return M},g=l==="horizontal",_=wr(e.matrix,[o,s]),p=e.offsetPos,w=_[0]+p[0],y=_[1]+p[1],E=d*v,C=Math.round(g?y:w)-d,b=parseFloat((C/v).toFixed(f||0)),P=u.slice().sort(function(M,z){return Math.abs(b-M)-Math.abs(b-z)});if(P.length&&Math.abs(P[0]*v-C)<c&&(b=P[0],C=b*v),!e.fromRuler||!this._isFirstMove){if(h){var x=l==="horizontal"?[w,C+E]:[C+E,y];this.displayElement.style.cssText+="display: block;transform: translate(-50%, -50%) "+"translate(".concat(x.map(function(M){return"".concat(M,"px")}).join(", "),")"),this.displayElement.innerHTML="".concat(m(b))}var R=e.target;R.setAttribute("data-pos",b),R.style.transform="".concat(this.getTranslateName(),"(").concat(C+d*v,"px)")}return C},n.getTranslateName=function(){return this.props.type==="horizontal"?"translateY":"translateX"},n._startDragScroll=function(t){var e=this,o=this.props.scrollOptions;if(o){var s=t.datas,a=new so;s.dragScroll=a,a.on("scroll",function(l){var u,c,h=l.container,f=l.direction;(c=(u=e.props).onRequestScroll)===null||c===void 0||c.call(u,{container:h,direction:f})}).on("move",function(l){var u=l.offsetX,c=l.offsetY,h=l.inputEvent;e.gesto.scrollBy(u,c,h.inputEvent,!0)}),a.dragStart(t,{container:o.container})}},n._dragScroll=function(t){var e=this.props.scrollOptions;if(e){var o=t.datas.dragScroll;o.drag(t,e)}},n._endDragScroll=function(t){var e;(e=t.datas.dragScroll)===null||e===void 0||e.dragEnd(),t.datas.dragScroll=null},n._setZoom=function(t){var e=t.zoom,o=t.guidesZoom;this.props.zoom;var s=!!this.props.guidesZoom;s?o&&(this._guidesZoom=o):(o&&(this._zoom=o,this._guidesZoom=o),e&&(this._guidesZoom=e)),e&&(this._zoom=e)},r.defaultProps={className:"",type:"horizontal",zoom:1,guidesZoom:0,style:{},snapThreshold:5,snaps:[],digit:0,onClickRuler:function(){},onChangeGuides:function(){},onRequestScroll:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},displayDragPos:!1,dragPosFormat:function(t){return t},defaultGuides:[],lockGuides:!1,showGuides:!0,guideStyle:{},dragGuideStyle:{},guidePosStyle:{},defaultGuidesPos:0},r}(Ur),Oe=function(i,r){return Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},Oe(i,r)};function Fe(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Oe(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var qt=function(){return qt=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},qt.apply(this,arguments)};function wo(i,r,n,t){var e=arguments.length,o=e<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,n):t,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,r,n,t);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(e<3?s(o):e>3?s(r,n,o):s(r,n))||o);return e>3&&o&&Object.defineProperty(r,n,o),o}var yo=vo,So=go,bo=po,Eo=function(i){Fe(r,i);function r(t){var e=i.call(this,t)||this;return e.state={},e.state=e.props,e}var n=r.prototype;return n.render=function(){return F(_o,qt({ref:rt(this,"guides")},this.state))},r}(We);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var De=function(){return De=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},De.apply(this,arguments)};function zo(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var t=Array(i),e=0,r=0;r<n;r++)for(var o=arguments[r],s=0,a=o.length;s<a;s++,e++)t[e]=o[s];return t}var Co=function(){function i(){this._events={}}var r=i.prototype;return r.on=function(n,t){if(H(n))for(var e in n)this.on(e,n[e]);else this._addEvent(n,t,{});return this},r.off=function(n,t){if(!n)this._events={};else if(H(n))for(var e in n)this.off(e);else if(!t)this._events[n]=[];else{var o=this._events[n];if(o){var s=Kt(o,function(a){return a.listener===t});s>-1&&o.splice(s,1)}}return this},r.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(o){e._addEvent(n,o,{once:!0})})},r.emit=function(n,t){var e=this;t===void 0&&(t={});var o=this._events[n];if(!n||!o)return!0;var s=!1;return t.eventType=n,t.stop=function(){s=!0},t.currentTarget=this,zo(o).forEach(function(a){a.listener(t),a.once&&e.off(n,a.listener)}),!s},r.trigger=function(n,t){return t===void 0&&(t={}),this.emit(n,t)},r._addEvent=function(n,t,e){var o=this._events;o[n]=o[n]||[];var s=o[n];s.push(De({listener:t},e))},i}(),Po=function(i){Fe(r,i);function r(t,e){e===void 0&&(e={});var o=i.call(this)||this;o.containerProvider=null,o.selfElement=null,o._warp=!1;var s={};bo.forEach(function(l){s[Pr("on ".concat(l))]=function(u){return o.trigger(l,u)}});var a;return e.warpSelf?(delete e.warpSelf,o._warp=!0,a=t):(a=document.createElement("div"),t.appendChild(a)),o.containerProvider=_r(F(Eo,qt({ref:rt(o,"innerGuides")},s,e)),a),o}var n=r.prototype;return n.setState=function(t,e){this.innerGuides.setState(t,e)},n.forceUpdate=function(t){this.innerGuides.forceUpdate(t)},n.destroy=function(){var t,e=this.selfElement;_r(null,e,this.containerProvider),this._warp||(t=e==null?void 0:e.parentElement)===null||t===void 0||t.removeChild(e),this.selfElement=null,this.innerGuides=null},n.getInnerGuides=function(){return this.innerGuides.guides},r=wo([_e(So,function(t,e){t[e]||(t[e]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=this.getInnerGuides();if(!(!a||!a[e]))return a[e].apply(a,o)})}),_e(yo,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getInnerGuides().props[e]},set:function(o){var s;this.innerGuides.setState((s={},s[e]=o,s))},enumerable:!0,configurable:!0})})],r),r}(Co),Sr=function(i){Fe(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(Po);const xo={props:{scale:Number,contentWidth:Number,contentHeight:Number,marginAroundContent:{type:Number,default:0},limitRange:{type:Boolean,default:!1},magnification:Number,layout_mode:{type:String,default:"screen"},show_rules:{type:Boolean,default:!1},enableDragToPan:{type:Boolean,default:!0}},data(){return{infiniteviewer:null,horizontalGuides:null,verticalGuides:null,scroll_left:void 0,scroll_top:void 0,debounce_zoom:void 0,debounce_scroll:void 0,debounce_content_visibility:void 0,is_zooming:!1,contentOffset:{x:0,y:0},isContentVisible:!0,isPanning:!1}},created(){},mounted(){this.initInfiniteViewer(),this.$nextTick(()=>{this.scrollToCorner({animate:!1}),this.$refs.infiniteviewer}),this.$eventHub.$on("panzoom.panTo",this.panTo),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){this.infiniteviewer&&(this.infiniteviewer.off("scroll",this.onScroll),this.infiniteviewer.off("dragStart",this.dragStart),this.infiniteviewer.off("dragEnd",this.dragEnd),this.infiniteviewer.off("pinchStart",this.pinchStart),this.infiniteviewer.off("abortPinch",this.abortPinch),this.infiniteviewer.off("pinch",this.pinch),this.infiniteviewer.destroy()),this.horizontalGuides&&this.horizontalGuides.destroy(),this.verticalGuides&&this.verticalGuides.destroy(),this.debounce_content_visibility&&clearTimeout(this.debounce_content_visibility),window.removeEventListener("resize",this.onWindowResize),this.$refs.infiniteviewer,this.$eventHub.$off("panzoom.panTo",this.panTo),this.$root.set_new_module_offset_left=0,this.$root.set_new_module_offset_top=0},watch:{scale(){this.updateScale(this.scale),this.updateViewerOptions(),this.updateGuidesZoom()},contentWidth(){this.updateViewerOptions(),this.updateGuidesResize(),this.$nextTick(()=>{this.checkContentVisibility()})},contentHeight(){this.updateViewerOptions(),this.updateGuidesResize(),this.$nextTick(()=>{this.checkContentVisibility()})},magnification(){this.updateViewerOptions()},layout_mode(){this.show_rules&&(this.horizontalGuides&&(this.horizontalGuides.destroy(),this.horizontalGuides=null),this.verticalGuides&&(this.verticalGuides.destroy(),this.verticalGuides=null),this.$nextTick(()=>{this.initGuides()}))},show_rules(i){i?this.$nextTick(()=>{setTimeout(()=>{this.initGuides()},100)}):(this.horizontalGuides&&(this.horizontalGuides.destroy(),this.horizontalGuides=null),this.verticalGuides&&(this.verticalGuides.destroy(),this.verticalGuides=null))},enableDragToPan(i){this.infiniteviewer&&(this.infiniteviewer.useMouseDrag=i)}},computed:{unit(){return this.layout_mode==="screen"?"px":"cm"},guidesConfig(){return{zoom:1,unit:50}}},methods:{initInfiniteViewer(){if(!this.$refs.infiniteviewer||!this.$refs.viewport)return;const i=this.getViewerOptions();this.infiniteviewer=new di(this.$refs.infiniteviewer,this.$refs.viewport,i),this.infiniteviewer.on("scroll",this.onScroll),this.infiniteviewer.on("dragStart",this.dragStart),this.infiniteviewer.on("dragEnd",this.dragEnd),this.infiniteviewer.on("pinchStart",this.pinchStart),this.infiniteviewer.on("abortPinch",this.abortPinch),this.infiniteviewer.on("pinch",this.pinch),this.show_rules&&this.$nextTick(()=>{setTimeout(()=>{this.initGuides()},100)}),this.$nextTick(()=>{setTimeout(()=>{this.checkContentVisibility()},200)})},initGuides(){if(!this.$refs.horizontalGuides||!this.$refs.verticalGuides)return;this.contentOffset=this.getContentOffset();const i=this.guidesConfig;this.horizontalGuides=new Sr(this.$refs.horizontalGuides,{type:"horizontal",zoom:i.zoom,unit:i.unit,backgroundColor:"transparent",lineColor:"hsl(0, 0%, 83%)",textColor:"hsl(0, 0%, 83%)",textBackgroundColor:"transparent",segment:2}),this.verticalGuides=new Sr(this.$refs.verticalGuides,{type:"vertical",zoom:i.zoom,unit:i.unit,backgroundColor:"transparent",lineColor:"hsl(0, 0%, 83%)",textColor:"hsl(0, 0%, 83%)",textBackgroundColor:"transparent",segment:2}),this.updateGuidesScroll()},updateGuidesScroll(){if(!this.show_rules||!this.infiniteviewer||!this.horizontalGuides||!this.verticalGuides||!this.$refs.viewport)return;this.contentOffset=this.getContentOffset();const i=this.infiniteviewer.getScrollLeft()||0,r=this.infiniteviewer.getScrollTop()||0,n=this.infiniteviewer.getZoom()||this.scale||1,t=this.guidesConfig,e=i-this.contentOffset.x,o=r-this.contentOffset.y,s=t.zoom*n;this.horizontalGuides.scroll(e,s),this.horizontalGuides.scrollGuides(o,s),this.verticalGuides.scroll(o,s),this.verticalGuides.scrollGuides(e,s)},getContentOffset(){if(!this.$refs.viewport||!this.infiniteviewer)return{x:0,y:0};const i=this.$refs.viewport,r=i.querySelector(".pagedjs_first_page, .pagedjs_page, [data-page-number]");if(r){let t=r.offsetLeft,e=r.offsetTop,o=r.offsetParent;for(;o&&o!==i&&o!==this.$refs.infiniteviewer;)t+=o.offsetLeft,e+=o.offsetTop,o=o.offsetParent;return{x:t,y:e}}const n=i.firstElementChild;return n?{x:n.offsetLeft||0,y:n.offsetTop||0}:{x:0,y:0}},getViewerOptions(){const i=window.innerWidth,r=window.innerHeight;return this.limitRange&&(-this.marginAroundContent,this.contentWidth-i+this.marginAroundContent,-this.marginAroundContent,this.contentHeight-r+this.marginAroundContent),{useMouseDrag:this.enableDragToPan,useWheelScroll:!0,useAutoZoom:!0,margin:0,zoomRange:[.1,50],maxPinchWheel:10,displayVerticalScroll:!0,displayHorizontalScroll:!0}},updateViewerOptions(){},dragStart(i){var r,n,t;(t=(n=(r=i.inputEvent)==null?void 0:r.target)==null?void 0:n.classList)!=null&&t.contains("panzoom-exclude")&&i.stop(),this.isPanning=!0},dragEnd(i){this.isPanning=!1,i.isDrag||this.disableActiveModule()},pinchStart(){console.log("pinchStart")},abortPinch(){console.log("abortPinch")},pinch(){this.is_zooming=!0,this.debounce_zoom&&clearTimeout(this.debounce_zoom),this.debounce_zoom=setTimeout(async()=>{const i=this.infiniteviewer.getZoom();i!==this.scale&&this.$emit("update:scale",i),setTimeout(()=>{this.is_zooming=!1},200)},500)},panTo({x:i,y:r}){this.scrollToCorner({x:i,y:r,animate:!0})},scrollToOrigin(){if(!this.infiniteviewer)return;const i=this.getContentOffset();this.scrollToCorner({x:i.x||0,y:i.y||0,animate:!1})},scrollToCorner({x:i,y:r,animate:n}){if(!this.infiniteviewer)return;const t=n?{duration:200,absolute:!0}:{absolute:!0},e=80,o=this.scale||this.infiniteviewer.getZoom()||1;let s=(i||0)+-(0+e)/o,a=(r||0)+-e/o;this.infiniteviewer.scrollTo(s,a,t)},updateScale(i){this.infiniteviewer&&i!==this.infiniteviewer.getZoom()&&(this.is_zooming=!0,this.infiniteviewer.setZoom(i,{duration:200,zoomBase:"viewport",zoomOffsetX:this.$root.zoom_offset,zoomOffsetY:this.$root.zoom_offset}),setTimeout(()=>{this.updateGuidesZoom(),this.checkContentVisibility(),setTimeout(()=>{this.is_zooming=!1},300)},250))},disableActiveModule(){this.$eventHub.$emit("module.setActive",!1)},onScroll(){this.show_rules&&this.updateGuidesScroll(),this.checkContentVisibility(),this.debounce_scroll&&clearTimeout(this.debounce_scroll),this.debounce_scroll=setTimeout(async()=>{this.$root.set_new_module_offset_left=Math.max(0,this.infiniteviewer.getScrollLeft()),this.$root.set_new_module_offset_top=Math.max(0,this.infiniteviewer.getScrollTop())},500)},checkContentVisibility(){this.debounce_content_visibility&&clearTimeout(this.debounce_content_visibility),this.debounce_content_visibility=setTimeout(()=>{this._checkContentVisibility()},200)},_checkContentVisibility(){if(!this.infiniteviewer||!this.$refs.viewport){this.isContentVisible=!0;return}const i=this.$refs.infiniteviewer,r=this.$refs.viewport,n=this.infiniteviewer.getScrollLeft()||0,t=this.infiniteviewer.getScrollTop()||0,e=this.infiniteviewer.getZoom()||this.scale||1,o=i.getBoundingClientRect(),s=o.width/e,a=o.height/e,l=n,u=n+s,c=t,h=t+a,f=Array.from(r.children);if(f.length===0){this.isContentVisible=!1;return}let d=!1;for(let v=0;v<f.length;v++){const g=f[v].getBoundingClientRect();if(g.width===0&&g.height===0)continue;const _=(g.left-o.left)/e+n,p=(g.right-o.left)/e+n,w=(g.top-o.top)/e+t,y=(g.bottom-o.top)/e+t;if(_<u&&p>l&&w<h&&y>c){d=!0;break}}this.isContentVisible=d},getZoom(){return this.infiniteviewer?this.infiniteviewer.getZoom():1},getScrollLeft(){return this.infiniteviewer?this.infiniteviewer.getScrollLeft():0},getScrollTop(){return this.infiniteviewer?this.infiniteviewer.getScrollTop():0},scrollTo(i,r,n){this.infiniteviewer&&this.infiniteviewer.scrollTo(i,r,n)},setZoom(i,r){this.infiniteviewer&&this.infiniteviewer.setZoom(i,r),this.updateGuidesZoom()},updateGuidesZoom(){if(!this.show_rules||!this.horizontalGuides||!this.verticalGuides||!this.infiniteviewer)return;const i=this.infiniteviewer.getZoom()||this.scale||1,r=this.guidesConfig;this.horizontalGuides.setZoom(r.zoom*i),this.verticalGuides.setZoom(r.zoom*i)},updateGuidesResize(){this.show_rules&&(this.horizontalGuides&&this.horizontalGuides.resize(),this.verticalGuides&&this.verticalGuides.resize())},onWindowResize(){this.updateGuidesResize(),this.$nextTick(()=>{this.updateGuidesScroll(),this.checkContentVisibility()})},onWheel(i){if(!(i.metaKey||i.ctrlKey)||(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),!this.infiniteviewer))return;const n=this.infiniteviewer.getZoom()||this.scale||1,t=this.getViewerOptions().zoomRange,o=-i.deltaY*.15*.01*n;let s=n+o;s=Math.max(t[0],Math.min(t[1],s)),!(Math.abs(s-n)<.01)&&(this.is_zooming=!0,this.infiniteviewer.setZoom(s,{duration:0}),this.updateGuidesZoom(),s!==this.scale&&this.$emit("update:scale",s),setTimeout(()=>{this.is_zooming=!1,this.checkContentVisibility()},100))}}};var To=function(){var r=this,n=r._self._c;return n("div",{ref:"infiniteviewer",staticClass:"viewer",class:{"is--drag-to-pan":r.enableDragToPan&&!r.isPanning,"is--panning":r.enableDragToPan&&r.isPanning}},[r.show_rules?n("div",{ref:"horizontalGuides",staticClass:"guides guides--horizontal"}):r._e(),r.show_rules?n("div",{ref:"verticalGuides",staticClass:"guides guides--vertical"}):r._e(),n("div",{ref:"viewport",staticClass:"_pzViewport"},[r._t("default")],2),n("transition",{attrs:{name:"fade"}},[r.isContentVisible?r._e():n("button",{staticClass:"u-button u-button_bleuvert _showOriginBtn",attrs:{type:"button"},on:{click:r.scrollToOrigin}},[n("b-icon",{attrs:{icon:"house"}}),r._v(" "+r._s(r.$t("back_to_content"))+" ")],1)])],1)},Oo=[],Do=_n(xo,To,Oo,!1,null,"647c2ca6");const Mo=Do.exports;export{Mo as P};
